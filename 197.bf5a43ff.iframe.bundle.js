(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{4046:function(module,exports,__webpack_require__){var css=__webpack_require__(4139),insertCss=__webpack_require__(72),content="string"==typeof css?[[module.i,css,""]]:css;(exports=module.exports=css.locals||{})._getContent=function(){return content},exports._getCss=function(){return""+css},exports._insertCss=function(options){return insertCss(content,options)}},4050:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(1);var _welldone_software_why_did_you_render_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),ScreenShareIcon=function ScreenShareIcon(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$height=_ref.height,height=void 0===_ref$height?14:_ref$height,_ref$width=_ref.width,width=void 0===_ref$width?14:_ref$width,_ref$fill=(_ref.working,_ref.fill),fill=void 0===_ref$fill?"#fff":_ref$fill;return Object(_welldone_software_why_did_you_render_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:width,height:height,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(_welldone_software_why_did_you_render_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M6 4.34375C6 4.06761 5.77614 3.84375 5.5 3.84375H1.5C0.671574 3.84375 0 4.51532 0 5.34375V12.5C0 13.3284 0.671574 14 1.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.34375C14 4.51532 13.3284 3.84375 12.5 3.84375H8.5C8.22386 3.84375 8 4.06761 8 4.34375C8 4.61989 8.22386 4.84375 8.5 4.84375H12.5C12.7761 4.84375 13 5.0676 13 5.34375V12.5C13 12.7761 12.7761 13 12.5 13H1.5C1.22386 13 1 12.7761 1 12.5V5.34375C1 5.0676 1.22386 4.84375 1.5 4.84375H5.5C5.77614 4.84375 6 4.61989 6 4.34375Z",fill:fill}),Object(_welldone_software_why_did_you_render_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M6.01562 6.15625C6.01562 5.94051 5.84074 5.76562 5.625 5.76562H2.9375C2.42836 5.76562 2.01562 6.17836 2.01562 6.6875V11.0469C2.01562 11.556 2.42836 11.9688 2.9375 11.9688H11.0781C11.5873 11.9688 12 11.556 12 11.0469V6.6875C12 6.17836 11.5873 5.76562 11.0781 5.76562H8.40625C8.19051 5.76562 8.01562 5.94051 8.01562 6.15625C8.01562 6.37199 8.19051 6.54688 8.40625 6.54688H11.0781C11.1558 6.54688 11.2188 6.60983 11.2188 6.6875V11.0469C11.2188 11.1245 11.1558 11.1875 11.0781 11.1875H2.9375C2.85983 11.1875 2.79688 11.1245 2.79688 11.0469V6.6875C2.79688 6.60984 2.85983 6.54688 2.9375 6.54688H5.625C5.84074 6.54688 6.01562 6.37199 6.01562 6.15625Z",fill:fill}),Object(_welldone_software_why_did_you_render_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M7.22103 0.176412C7.06859 0.0245292 6.82203 0.0245292 6.6696 0.176412L4.50554 2.33266C4.35271 2.48493 4.35226 2.73226 4.50454 2.88509C4.65681 3.03791 4.90414 3.03836 5.05696 2.88609L6.5625 1.38599V8.60938C6.5625 8.82511 6.73739 9 6.95312 9C7.16886 9 7.34375 8.82511 7.34375 8.60938V1.40155L8.83366 2.88609C8.98649 3.03836 9.23382 3.03791 9.38609 2.88509C9.53836 2.73226 9.53791 2.48493 9.38509 2.33266L7.22103 0.176412Z",fill:fill})]})};ScreenShareIcon.__docgenInfo={description:"",methods:[],displayName:"ScreenShareIcon"},__webpack_exports__.a=ScreenShareIcon},4060:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return StateBlock}));var StateBlock={BEFORE:"BEFORE",AFTER:"AFTER"}},4079:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(1);var isomorphic_style_loader_withStyles__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26),isomorphic_style_loader_withStyles__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(isomorphic_style_loader_withStyles__WEBPACK_IMPORTED_MODULE_1__),_common_Spinner__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(416),_Conference_scss__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4046),_Conference_scss__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_Conference_scss__WEBPACK_IMPORTED_MODULE_3__),_welldone_software_why_did_you_render_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0);__webpack_exports__.a=isomorphic_style_loader_withStyles__WEBPACK_IMPORTED_MODULE_1___default()(_Conference_scss__WEBPACK_IMPORTED_MODULE_3___default.a)((function(){return Object(_welldone_software_why_did_you_render_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:_Conference_scss__WEBPACK_IMPORTED_MODULE_3___default.a.spinner,children:Object(_welldone_software_why_did_you_render_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_common_Spinner__WEBPACK_IMPORTED_MODULE_2__.a,{})})}))},4080:function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var detect=__webpack_require__(4140).detect,BrowserType_CHROME="chrome",BrowserType_SAFARI="safari",BrowserType_FIREFOX="firefox",browserDetect=function(){function browserDetect(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,browserDetect),this.browser=detect()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(browserDetect,[{key:"isChrome",value:function isChrome(){return this.browser.name===BrowserType_CHROME}},{key:"isFirefox",value:function isFirefox(){return this.browser.name===BrowserType_FIREFOX}},{key:"isSafari",value:function isSafari(){return this.browser.name===BrowserType_SAFARI}},{key:"getBrowserName",value:function getBrowserName(){return this.browser.name}}]),browserDetect}();__webpack_exports__.a=new browserDetect},4139:function(module,exports,__webpack_require__){(exports=__webpack_require__(69)(!1)).push([module.i,"._7t5EW{display:flex;flex-direction:column;box-sizing:border-box}._7t5EW.ToYdL{height:100%}._7t5EW.-iVx4{z-index:1079}._2oqvt{display:flex;justify-content:center;align-items:center;position:absolute;top:50%;left:50%;height:80px;width:80px;border-radius:47%;background:rgba(0,0,0,0.32);transform:translate(-50%, -50%);z-index:1010}._2jKnw *{display:flex;flex-direction:column;box-sizing:border-box}._2jKnw{position:relative;flex:1;align-self:center;justify-content:center;align-items:center;position:relative;max-height:100%;max-width:100%;transition:all ease-in-out 0.2s}._2jKnw:hover{background:rgba(0,0,0,0.15)}._2jKnw.BgTcq{border:2px solid #fff}._2jKnw._3w_Sn{border:2px solid #f44336}._2jKnw._2W1sD{border:2px solid #efca3b}._2jKnw._1iy7S{border:2px solid #1fce26}._2jKnw._39D17{border:5px solid #f44336}._2jKnw video{position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;object-fit:contain}._2jKnw._3QJ5C video{object-fit:cover}._2jKnw ._3QPf2{justify-content:center;align-items:center;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;max-height:100%;width:100%;max-width:100%;padding:4px 0}._2jKnw ._3QPf2 ._1fHCI{align-items:center;position:relative;height:100%;width:100%;overflow:hidden}._2jKnw ._3QPf2 ._1fHCI img{position:absolute;top:50%;bottom:0;left:50%;right:0;min-height:30px;min-width:30px;height:55%;border-radius:50%;box-shadow:0 0 5px #0004;transform:translate(-50%, -50%)}._2jKnw ._3QPf2 ._1fHCI._1rqOR img{max-height:70%;max-width:70%}._2jKnw ._3OSy9{display:block;position:absolute;left:50%;width:calc(80% - 40px);color:#fff;text-align:center;text-shadow:1px 1px 1px #0004, 1px -1px 1px #0004, -1px 1px 1px #0004, -1px -1px 1px #0004;transform:translateX(-50%);overflow:hidden;opacity:0}._2jKnw._3rrp6 ._3OSy9{text-shadow:1px 1px 1px #000b, 1px -1px 1px #000b, -1px 1px 1px #000b, -1px -1px 1px #000b}._2jKnw .v6NqW{flex:1;justify-content:center;align-items:center;position:absolute;top:0;bottom:0;left:0;right:0;padding-bottom:5px;pointer-events:none}._2jKnw .v6NqW._3aUlj{height:100%;width:100%;background:#0009;cursor:pointer}._2jKnw .v6NqW._3aUlj:hover{background:#0006}._2jKnw .v6NqW .czGVd{flex-direction:row;position:absolute}._2jKnw .v6NqW .czGVd._220Ln,._2jKnw .v6NqW .czGVd._34B2A{top:4px}._2jKnw .v6NqW .czGVd._220Ln,._2jKnw .v6NqW .czGVd._3lwGP{left:4px}._2jKnw .v6NqW .czGVd._34B2A,._2jKnw .v6NqW .czGVd.hdgKJ{right:4px}._2jKnw .v6NqW .czGVd._3lwGP,._2jKnw .v6NqW .czGVd.hdgKJ{bottom:4px}._2jKnw .v6NqW .czGVd._220Ln>*+*,._2jKnw .v6NqW .czGVd._34B2A>*+*,._2jKnw .v6NqW .czGVd._3lwGP>*+*,._2jKnw .v6NqW .czGVd.hdgKJ>*+*{margin-left:5px}._2jKnw .v6NqW ._3gtoj{justify-content:center;align-items:center;height:16px;width:16px;min-height:16px !important;min-width:16px !important;padding:0;border-radius:3px;box-shadow:0 0 2px #0004;background:rgba(255,255,255,0.62);opacity:0;cursor:pointer;pointer-events:all;transition:all ease 0.2s}._2jKnw .v6NqW ._3gtoj:hover{box-shadow:0 0 5px #fff}._2jKnw .v6NqW ._3gtoj.VyzU9{height:16px;width:16px;background:rgba(255,255,255,0.62)}._2jKnw .v6NqW ._3gtoj._3oaZE{height:16px;width:16px;background:rgba(255,255,255,0.62);opacity:1}._2jKnw .v6NqW ._3gtoj._2sdFF{transform:rotate(180deg)}._2jKnw .v6NqW ._3gtoj._3KdIj{justify-content:center;align-items:center}._2jKnw .v6NqW ._3gtoj.Clkas{height:16px;min-width:8px !important;width:8px;border:1px solid #fff;border-radius:2px;background:rgba(0,0,0,0.58)}._2jKnw .v6NqW ._3gtoj.Clkas._2AN51{height:16px;width:16px;border-color:rgba(255,255,255,0.62);background:rgba(255,255,255,0.62)}._2jKnw .v6NqW ._3gtoj.Clkas._3vvzR{padding:0;border-color:#f44336}._2jKnw .v6NqW ._3gtoj.Clkas._3vvzR.p5wIL{opacity:1}._2jKnw .v6NqW ._3gtoj.Clkas ._2eCwD{position:absolute;bottom:1px;left:1px;width:calc(100% - 2px);border-radius:1px;background:#d4e8ff}._2jKnw .v6NqW ._3gtoj.Clkas._3vvzR ._2eCwD{bottom:0;left:0;width:100%;background:#f44336}._2jKnw:hover .v6NqW ._3gtoj{opacity:1}._2jKnw.p5wIL .v6NqW{border:2px solid #287eff}._2jKnw:not(._3rrp6) .v6NqW{border:2px solid transparent}._2jKnw._5ViZt:hover{cursor:pointer}._2jKnw._5ViZt:hover .v6NqW:not(._3aUlj){background:#0003}._36nDd ._2jKnw ._3OSy9{display:none}._7t5EW:hover ._2jKnw ._3OSy9{opacity:1;transition:all ease 0.2s}._7t5EW:hover ._2jKnw .v6NqW ._3gtoj.Clkas{opacity:1}._7t5EW:hover ._2jKnw .v6NqW ._3gtoj.VyzU9.SJXvp{opacity:1}.yFE9k{justify-content:center;align-items:center;max-height:100%;height:100%;max-width:100%;width:100%}._1obkn{display:flex;flex-flow:column wrap}._3FjE3{margin:0 4px}._1O65E{flex-direction:row;justify-content:center;align-items:center;border-radius:5px;opacity:1;text-shadow:none;white-space:nowrap;transition:all ease 0.2s}._1O65E:disabled{cursor:not-allowed;pointer-events:none}._1O65E._2eyon{background:transparent;color:rgba(255,255,255,0.36);border:1px solid rgba(255,255,255,0.14)}._1O65E._2eyon:hover{background:rgba(255,255,255,0.14);color:#f44336;border-color:rgba(255,255,255,0.36)}._1O65E._2eyon._3qbY_{background:rgba(255,255,255,0.14);color:#f10;border-color:rgba(255,255,255,0.14)}._1O65E.Clkas,._1O65E._1wkBs,._1O65E._3YbOC{background:rgba(255,255,255,0.14);color:#fff;border:1px solid rgba(255,255,255,0.14)}._1O65E.Clkas:hover,._1O65E._1wkBs:hover,._1O65E._3YbOC:hover{background:rgba(255,255,255,0.36);border-color:rgba(255,255,255,0.36)}._1O65E.Clkas.x3Ehb,._1O65E._1wkBs.x3Ehb,._1O65E._3YbOC.x3Ehb{background:rgba(0,0,0,0.32);color:#f44336;border-color:rgba(0,0,0,0.32)}._1O65E.Clkas.oGpbP,._1O65E._1wkBs.oGpbP,._1O65E._3YbOC.oGpbP{cursor:not-allowed}._1O65E._31ShH{background:rgba(255,255,255,0.14);color:#fff;border:1px solid rgba(255,255,255,0.14)}._1O65E._31ShH:hover{background:rgba(255,255,255,0.36);border-color:rgba(255,255,255,0.36)}._1O65E._31ShH._3qbY_{background:#287eff;color:#fff;border-color:#287eff}._1O65E._31ShH._3yXVC{background:#07bbc7;color:#fff;border-color:#07bbc7}._1O65E._31ShH._3RpzK{height:14px;padding:0;min-height:12px !important}._1O65E._31ShH._2JNQS{border-top-left-radius:0;border-top-right-radius:0}._1O65E._31ShH.ruFdZ{border-bottom-right-radius:0;border-bottom-left-radius:0}._1O65E.Su-6f{background:#287eff;color:#fff;height:28px;border:1px solid rgba(255,255,255,0.14)}._1O65E._3IqM5{background:transparent;color:rgba(255,255,255,0.36);border:1px solid rgba(255,255,255,0.14)}._1O65E._3IqM5:hover{background:rgba(255,255,255,0.14);color:#fff;border-color:rgba(255,255,255,0.36)}._1O65E.FvAbQ{background:#006d05;color:#fff}._1O65E.FvAbQ:hover{background:#1bc321}._1O65E._3V21-{background:#2459a7;color:#fff}._1O65E._3V21-:hover{background:#287eff}._1O65E._2uFHY{background:#f3c41e;color:#fff}._1O65E._2uFHY:hover{background:#f7d96f}._1O65E._1iaBZ{background:#f44336;color:#fff}._1O65E._1iaBZ:hover{background:#f8877e}._1mVl4{position:relative;padding:10px 10px 10px 25px;background:lightgoldenrodyellow;font-size:12px;text-align:center;cursor:default;z-index:1}._1mVl4 ._2Y_Xu{margin:0 5px 0 -15px}._1mVl4 ._1Yz7f{justify-content:space-evenly}.h3P_e{display:block;padding:10px 10px 10px 50px;color:inherit}.h3P_e:hover{background-color:#eee;color:inherit;text-decoration:none}._3a0Zj{display:none !important}._3G5wE>*{transform:rotate(-180deg)}\n",""]),exports.locals={conferenceContainer:"_7t5EW",column:"ToYdL",fullScreen:"-iVx4",spinner:"_2oqvt",element:"_2jKnw",selected:"BgTcq",interrupted:"_3w_Sn",inactive:"_2W1sD",restoring:"_1iy7S",muted_speaking:"_39D17",fill:"_3QJ5C",no_stream:"_3QPf2",image:"_1fHCI",large:"_1rqOR",name:"_3OSy9",stream:"_3rrp6",settings:"v6NqW",faded:"_3aUlj",area:"czGVd",topLeft:"_220Ln",topRight:"_34B2A",bottomLeft:"_3lwGP",bottomRight:"hdgKJ",button:"_3gtoj",togglePin:"VyzU9",autoSelect:"_3oaZE",expand:"_2sdFF",options:"_3KdIj",microphone:"Clkas",no:"_2AN51",muted:"_3vvzR",speaking:"p5wIL",volume:"_2eCwD",preview:"_5ViZt",endMoving:"_36nDd",main:"SJXvp",centered:"yFE9k",shareContainer:"_1obkn",buttonMargin:"_3FjE3",callButton:"_1O65E",rec:"_2eyon",working:"_3qbY_",sound:"_1wkBs",camera:"_3YbOC",disabled:"x3Ehb",cursorNotAllowed:"oGpbP",screenShare:"_31ShH",workingSmartShare:"_3yXVC",showBoth:"_3RpzK",screenShareWithSmart:"_2JNQS",smartShareWithScreen:"ruFdZ",scheduleButton:"Su-6f",chat:"_3IqM5",green:"FvAbQ",blue:"_3V21-",yellow:"_2uFHY",red:"_1iaBZ",screenShareDescription:"_1mVl4",infoIcon:"_2Y_Xu",downloadLinks:"_1Yz7f",shareWithAppButton:"h3P_e",hide:"_3a0Zj",callManagerToggle:"_3G5wE"},module.exports=exports},4141:function(module,exports,__webpack_require__){var css=__webpack_require__(4142),insertCss=__webpack_require__(72),content="string"==typeof css?[[module.i,css,""]]:css;(exports=module.exports=css.locals||{})._getContent=function(){return content},exports._getCss=function(){return""+css},exports._insertCss=function(options){return insertCss(content,options)}},4142:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(69),___CSS_LOADER_AT_RULE_IMPORT_0___=__webpack_require__(4143);(exports=___CSS_LOADER_API_IMPORT___(!1)).i(___CSS_LOADER_AT_RULE_IMPORT_0___),exports.push([module.i,"\n",""]),module.exports=exports},4283:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react=__webpack_require__(1),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(2),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__(75),lib=__webpack_require__(17),CallsService=__webpack_require__(258),UserWorkspacesService=__webpack_require__(381),ConnectSceneService=__webpack_require__(77),types=__webpack_require__(11),makeStyles=__webpack_require__(1121),ThemeProvider=__webpack_require__(3925),withTheme=__webpack_require__(4286),classnames=__webpack_require__(22),classnames_default=__webpack_require__.n(classnames),conferenceTheme=__webpack_require__(1490),NetworkDetector=__webpack_require__(2259),usersChatsActions=__webpack_require__(66),PopupChatService=__webpack_require__(802),ContextMenuService=__webpack_require__(305),ContexMenu=__webpack_require__(184),constants=__webpack_require__(42),sizeConstants=__webpack_require__(653),localization=__webpack_require__(6),Spinner=__webpack_require__(4079),MenuItem=__webpack_require__(86),Typography=__webpack_require__(85),popover_Popover=__webpack_require__(3922).a,conference2_Conference=__webpack_require__(4046),Conference_default=__webpack_require__.n(conference2_Conference),FollowSessionsProvider=__webpack_require__(2243),mobileDetect=__webpack_require__(137),browser_compat_utils=__webpack_require__(170),immutableUtils=__webpack_require__(4),jsx_runtime=__webpack_require__(0),ConferenceGridViewIcon_ConferenceGridViewIcon=function ConferenceGridViewIcon(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$width=_ref.width,width=void 0===_ref$width?17:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?13:_ref$height,_ref$fill=_ref.fill,fill=void 0===_ref$fill?"black":_ref$fill;return Object(jsx_runtime.jsx)("svg",{width:width,height:height,viewBox:"0 0 24 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(jsx_runtime.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.03125 0C0.461706 0 0 0.461707 0 1.03125V16.9688C0 17.5383 0.461706 18 1.03125 18H22.9688C23.5383 18 24 17.5383 24 16.9688V1.03125C24 0.461706 23.5383 0 22.9688 0H1.03125ZM1.73438 1.73438V5.8125L7.78125 5.8125V1.73438H1.73438ZM22.2656 1.73438H16.2188V5.8125L22.2656 5.8125V1.73438ZM15.0469 1.73438H8.95312V5.8125L15.0469 5.8125V1.73438ZM1.73438 16.2656V12.2344H7.78125V16.2656H1.73438ZM7.78125 11.0625L1.73438 11.0625V6.98438L7.78125 6.98438V11.0625ZM8.95313 16.2656V12.2344L15.0469 12.2344V16.2656H8.95313ZM8.95312 11.0625H15.0469V6.98438H8.95312V11.0625ZM16.2188 16.2656V12.2344H22.2656V16.2656H16.2188ZM16.2188 11.0625L22.2656 11.0625V6.98438L16.2188 6.98438V11.0625Z",fill:fill})})};ConferenceGridViewIcon_ConferenceGridViewIcon.__docgenInfo={description:"",methods:[],displayName:"ConferenceGridViewIcon"};var Icons_ConferenceGridViewIcon=ConferenceGridViewIcon_ConferenceGridViewIcon,ConferenceFeaturedViewIcon_ConferenceFeaturedViewIcon=function ConferenceFeaturedViewIcon(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$width=_ref.width,width=void 0===_ref$width?17:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?13:_ref$height,_ref$fill=_ref.fill,fill=void 0===_ref$fill?"black":_ref$fill;return Object(jsx_runtime.jsxs)("svg",{width:width,height:height,viewBox:"0 0 24 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(jsx_runtime.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.3125 3.23438L3.32813 3.23438L3.32812 8.08594L16.3125 8.08594V3.23438ZM7.26562 4.40625H4.5V6.91406H7.26562V4.40625ZM15.1406 6.91406V4.40625L12.375 4.40625V6.91406H15.1406ZM8.4375 4.40625L11.2031 4.40625V6.91406L8.4375 6.91406V4.40625Z",fill:fill}),Object(jsx_runtime.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.03125 0C0.461706 0 0 0.461707 0 1.03125V16.9688C0 17.5383 0.461706 18 1.03125 18H22.9688C23.5383 18 24 17.5383 24 16.9688V1.03125C24 0.461706 23.5383 0 22.9688 0H1.03125ZM1.73438 1.73438V16.2656H22.2656V1.73438H1.73438Z",fill:fill})]})};ConferenceFeaturedViewIcon_ConferenceFeaturedViewIcon.__docgenInfo={description:"",methods:[],displayName:"ConferenceFeaturedViewIcon"};var Icons_ConferenceFeaturedViewIcon=ConferenceFeaturedViewIcon_ConferenceFeaturedViewIcon,ConferenceNormalViewIcon_ConferenceNormalViewIcon=function ConferenceNormalViewIcon(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$width=_ref.width,width=void 0===_ref$width?17:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?13:_ref$height,_ref$fill=_ref.fill,fill=void 0===_ref$fill?"black":_ref$fill;return Object(jsx_runtime.jsx)("svg",{width:width,height:height,viewBox:"0 0 24 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(jsx_runtime.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.03125 0C0.461706 0 0 0.461707 0 1.03125V16.9688C0 17.5383 0.461706 18 1.03125 18H22.9688C23.5383 18 24 17.5383 24 16.9688V1.03125C24 0.461706 23.5383 0 22.9688 0H1.03125ZM1.73438 1.73438V16.2656H14.4375V1.73438H1.73438ZM18.5859 16.2656H16.1719V13.5469H18.5859V16.2656ZM18.5859 12.375H16.1719V9.60938H18.5859V12.375ZM19.7578 13.5469V16.2656H22.2656V13.5469H19.7578ZM22.2656 12.375H19.7578V9.60938H22.2656V12.375ZM16.1719 5.67188V8.4375H18.5859V5.67188L16.1719 5.67188ZM19.7578 8.4375H22.2656V5.67188L19.7578 5.67188V8.4375ZM16.1719 1.73438V4.5L18.5859 4.5V1.73438H16.1719ZM19.7578 4.5L22.2656 4.5V1.73438H19.7578V4.5Z",fill:fill})})};ConferenceNormalViewIcon_ConferenceNormalViewIcon.__docgenInfo={description:"",methods:[],displayName:"ConferenceNormalViewIcon"};var Icons_ConferenceNormalViewIcon=ConferenceNormalViewIcon_ConferenceNormalViewIcon;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var viewTypes_translateViewType=function translateViewType(type){var _Views$NORMAL$Views$F;return(_Views$NORMAL$Views$F={},_defineProperty(_Views$NORMAL$Views$F,types.s.NORMAL,{title:Object(localization.a)("workspaces","normal_view"),getIcon:function getIcon(props){return Object(jsx_runtime.jsx)(Icons_ConferenceNormalViewIcon,_objectSpread({},props))}}),_defineProperty(_Views$NORMAL$Views$F,types.s.FEATURED,{title:Object(localization.a)("workspaces","featured_view"),getIcon:function getIcon(props){return Object(jsx_runtime.jsx)(Icons_ConferenceFeaturedViewIcon,_objectSpread({},props))}}),_defineProperty(_Views$NORMAL$Views$F,types.s.GRID,{title:Object(localization.a)("workspaces","grid_view"),getIcon:function getIcon(props){return Object(jsx_runtime.jsx)(Icons_ConferenceGridViewIcon,_objectSpread({},props))}}),_Views$NORMAL$Views$F)[type]},CheckIcon=__webpack_require__(1541),browserDetect=__webpack_require__(4080),ScreenShareIcon=__webpack_require__(4050),performanceUtils=__webpack_require__(825),Popup_const=__webpack_require__(4060),loadable_component=__webpack_require__(1493),CallManager_const=__webpack_require__(430);__webpack_require__(132);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function ConferenceCall_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function ConferenceCall_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ConferenceCall_ownKeys(Object(source),!0).forEach((function(key){ConferenceCall_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ConferenceCall_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ConferenceCall_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var Popup=Object(loadable_component.a)(_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Promise.all([__webpack_require__.e(200),__webpack_require__.e(199)]).then(__webpack_require__.bind(null,4282));case 2:return _context.abrupt("return",_context.sent.default);case 3:case"end":return _context.stop()}}),_callee)})))),participantSimpleId=[],useStyles=Object(makeStyles.a)((function(th){return{paper:{paddingTop:th.spacing(1),paddingBottom:th.spacing(1),paddingRight:th.spacing(2),paddingLeft:th.spacing(2)}}}));function ConnectionStatsContextItem(props){var _useState2=_slicedToArray(Object(react.useState)(null),2),anchorEl=_useState2[0],setAnchorEl=_useState2[1],classes=useStyles(),stats=props.getConnectionStats(),trackMetrics={},callMetrics={};return stats&&(stats.trackMetrics&&(trackMetrics=stats.trackMetrics),stats.callMetrics&&(callMetrics=stats.callMetrics)),Object(jsx_runtime.jsxs)(react_default.a.Fragment,{children:[Object(jsx_runtime.jsx)(MenuItem.a,{onClick:function onClick(e){setAnchorEl(e.currentTarget)},children:Object(jsx_runtime.jsx)(Typography.a,{children:Object(localization.a)("workspaces","connection_stats")})}),Object(jsx_runtime.jsx)(popover_Popover,{open:!!anchorEl,anchorEl:anchorEl,PaperProps:{className:classes.paper},onClose:function onClose(){setAnchorEl(null)},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"left"},children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)(Typography.a,{children:["Connection quality: ",callMetrics.connectionQuality]}),Object(jsx_runtime.jsxs)(Typography.a,{children:["Server region: ",callMetrics.serverRegion]}),Object(jsx_runtime.jsxs)(Typography.a,{children:["Server rtt: ",callMetrics.jvbRTT]}),Object(jsx_runtime.jsxs)(Typography.a,{children:["Packet loss:"," ",callMetrics.packetLoss?"download: "+callMetrics.packetLoss.download+" | upload: "+callMetrics.packetLoss.upload+" | total: "+callMetrics.packetLoss.total:null]}),Object(jsx_runtime.jsxs)(Typography.a,{children:["Frame rate: ",trackMetrics.frameRate]}),Object(jsx_runtime.jsxs)(Typography.a,{children:["Resolution: ",trackMetrics.width," x ",trackMetrics.height]})]})})]})}ConnectionStatsContextItem.propTypes={getConnectionStats:prop_types_default.a.func},ConnectionStatsContextItem.defaultProps={getConnectionStats:function getConnectionStats(){}};var ConferenceCall_ConferenceCall=function(_Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ConferenceCall,_Component);var _super=_createSuper(ConferenceCall);function ConferenceCall(props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConferenceCall),ConferenceCall_defineProperty(_assertThisInitialized(_this=_super.call(this,props)),"timeValueForDetectingMouseMovement",new Date),ConferenceCall_defineProperty(_assertThisInitialized(_this),"intervalId",null),ConferenceCall_defineProperty(_assertThisInitialized(_this),"endMouseMoving",(function(){_this.setState({isMouseMoving:!1})})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"mouseMove",(function(){_this.timeValueForDetectingMouseMovement=new Date,_this.state.isMouseMoving||_this.setState({isMouseMoving:!0})})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"shadowStateDebounce",null),ConferenceCall_defineProperty(_assertThisInitialized(_this),"shadowState",{participantsIds:[],participantsConnectionStatus:{},streams:{},audioStreams:{},screenShareStreams:{},screenShareUpdateTime:null}),ConferenceCall_defineProperty(_assertThisInitialized(_this),"setShadowState",(function(obj){Object.assign(_this.shadowState,obj),null==_this.shadowStateDebounce&&(_this.shadowStateDebounce=setTimeout((function(){_this.setState(_this.shadowState),clearTimeout(_this.shadowStateDebounce),_this.shadowStateDebounce=null}),500))})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"onWindowResize",(function(){var canPin=Object(browser_compat_utils.a)().width>=_this.props.minConnectWidth+types.i.width;_this.setState({canPin:canPin})})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"onConferenceUpdated",(function(data){if(data){if("CONFERENCE_JOINED"===data.detail.type){var participant=_this.callsService.getParticipant(data.detail.participantId);if(participant){_this.setState({myParticipantId:data.detail.participantId});var ids=_toConsumableArray(_this.shadowState.participantsIds);-1===_this.shadowState.participantsIds.indexOf(data.detail.participantId)&&ids.push(data.detail.participantId);var participantsConnectionStatus=ConferenceCall_objectSpread({},_this.shadowState.participantsConnectionStatus);participantsConnectionStatus[data.detail.participantId]=participant.get("connectionStatus"),_this.setShadowState({participantsIds:ids,participantsConnectionStatus:participantsConnectionStatus})}}if("USER_JOINED"===data.detail.type){var _participant=_this.callsService.getParticipant(data.detail.participantId);if(_participant){var _ids=_toConsumableArray(_this.shadowState.participantsIds);-1===_this.shadowState.participantsIds.indexOf(data.detail.participantId)&&_ids.push(data.detail.participantId);var _participantsConnectionStatus=ConferenceCall_objectSpread({},_this.shadowState.participantsConnectionStatus);_participantsConnectionStatus[data.detail.participantId]=_participant.get("connectionStatus"),_this.setShadowState({participantsIds:_ids,participantsConnectionStatus:_participantsConnectionStatus})}}if("USER_LEFT"===data.detail.type){var _ids2=_toConsumableArray(_this.shadowState.participantsIds),index=_ids2.findIndex((function(id){return id===data.detail.participantId}));index>-1&&(_ids2.splice(index,1),_this.setShadowState({participantsIds:_ids2}))}if("TRACK_ADDED_VIDEO"===data.detail.type){var streams=ConferenceCall_objectSpread({},_this.shadowState.streams);_this.callsService.getParticipant(data.detail.participantId)&&(streams[data.detail.participantId]=Date.now(),_this.setShadowState({streams:streams}))}if("TRACK_ADDED_AUDIO"===data.detail.type){var audioStreams=ConferenceCall_objectSpread({},_this.shadowState.audioStreams);_this.callsService.getParticipant(data.detail.participantId)&&(audioStreams[data.detail.participantId]=Date.now(),_this.setShadowState({audioStreams:audioStreams}))}if("TRACK_ADDED_SCREEN_SHARE"===data.detail.type){var screenShareStreams=ConferenceCall_objectSpread({},_this.shadowState.screenShareStreams);_this.callsService.getParticipant(data.detail.participantId)&&(screenShareStreams[data.detail.participantId]=Date.now(),_this.setShadowState({screenShareStreams:screenShareStreams}))}if("STATUS_CHANGED_SCREEN_SHARE"===data.detail.type&&_this.setShadowState({screenShareUpdateTime:Date.now()}),"TRACK_REMOVED_VIDEO"===data.detail.type){var _streams=ConferenceCall_objectSpread({},_this.shadowState.streams);_streams[data.detail.participantId]&&(delete _streams[data.detail.participantId],_this.setShadowState({streams:_streams}))}if("TRACK_REMOVED_AUDIO"===data.detail.type){var _audioStreams=ConferenceCall_objectSpread({},_this.shadowState.streams);_audioStreams[data.detail.participantId]&&(delete _audioStreams[data.detail.participantId],_this.setShadowState({audioStreams:_audioStreams}))}if("TRACK_REMOVED_SCREEN_SHARE"===data.detail.type){var _screenShareStreams=ConferenceCall_objectSpread({},_this.shadowState.screenShareStreams);_screenShareStreams[data.detail.participantId]&&(delete _screenShareStreams[data.detail.participantId],_this.setShadowState({screenShareStreams:_screenShareStreams}))}if("TRACK_MUTE_CHANGED"===data.detail.type){var _audioStreams2=ConferenceCall_objectSpread({},_this.shadowState.audioStreams);_this.callsService.getParticipant(data.detail.participantId)&&(_audioStreams2[data.detail.participantId]=Date.now(),_this.setShadowState({audioStreams:_audioStreams2}))}if("USER_CONNECTION_STATUS_CHANGED"===data.detail.type){var _participantsConnectionStatus2=ConferenceCall_objectSpread({},_this.shadowState.participantsConnectionStatus),_participant6=_this.callsService.getParticipant(data.detail.participantId);_participant6&&(_participantsConnectionStatus2[data.detail.participantId]=_participant6.get("connectionStatus"),_this.setShadowState({participantsConnectionStatus:_participantsConnectionStatus2}))}"DOMINANT_SPEAKER_CHANGED"===data.detail.type&&data.detail.participantId!==_this.shadowState.dominantSpeaker&&_this.setState({dominantSpeaker:data.detail.participantId}),"USER_STREAM_STATUS_UPDATED"===data.detail.type&&_this.setState({updated:!_this.state.updated})}})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"playCallingSound",(function(){_this.audioRef&&_this.audioRef.current&&(_this.audioRef.current.src="https://d1i26qt4g7gtak.cloudfront.net/7c0e8e70-3d41-41c7-aade-12e78159514b",_this.audioRef.current.play())})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"playDocalledSound",(function(){if(_this.audioRef&&_this.audioRef.current)try{_this.audioRef.current.src="https://d1i26qt4g7gtak.cloudfront.net/1b91d3cd-c40d-46ca-80a7-4aa5b496504a",_this.audioRef.current.currentTime=0,_this.audioRef.current.play(),_this.audioRef.current.loop=!1,_this.audioRef.current.autoPlay=!1}catch(e){console.error(e)}})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleFavourite",(function(id){_this.callsService.pinVideo(id)})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleMuted",(function(userId){_this.callsService.mute(userId)})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleMicrophone",(function(){_this.callsService.toggleMicrophone(),_this.callsService.toggleMute(_this.state.myParticipantId),_this.callsService.mute(_this.state.myParticipantId)})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleCamera",(function(){_this.callsService.toggleCamera()})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleSound",(function(){_this.callsService.toggleSound()})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleSelected",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(id,isGoToFullScreen){var selectedStream,selectedStreamId;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:selectedStream=_this.state.selectedStream,selectedStreamId=id,isGoToFullScreen||(selectedStream===id&&(selectedStreamId=null),_this.callsService.clearAutoPinnedVideos(),_this.setState({autoSelect:!1,selectedStream:selectedStreamId}));case 3:case"end":return _context2.stop()}}),_callee2)})));return function(_x,_x2){return _ref2.apply(this,arguments)}}()),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleOtherChats",(function(){var save=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_this.props.showPopup?(_this.props.hideDirectChat(),_this.userChatsService.hidePopup(!1),save&&_this.callsService.hideChat()):(_this.props.showDirectChat(),_this.userChatsService.showPopup(!1),save&&_this.callsService.showChat(),_this.props.pinPopup||_this.userChatsService.togglePopupPin())})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleScreenShare",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(hasScreenStream){var id,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(id=_args3.length>1&&void 0!==_args3[1]?_args3[1]:"screen",!hasScreenStream){_context3.next=6;break}return _context3.next=4,_this.callsService.stopScreenSharing();case 4:_context3.next=14;break;case 6:return _context3.prev=6,_context3.next=9,_this.callsService.startScreenSharing(id);case 9:_context3.next=14;break;case 11:_context3.prev=11,_context3.t0=_context3.catch(6),console.error(_context3.t0);case 14:case"end":return _context3.stop()}}),_callee3,null,[[6,11]])})));return function(_x3){return _ref3.apply(this,arguments)}}()),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleShowMyself",(function(){var showMyself=_this.state.showMyself;_this.setState({showMyself:!showMyself})})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"showStreamSettingsMenu",(function(_ref4){var event=_ref4.event,participant=_ref4.participant,id=_ref4.id,type=_ref4.type,filled=_ref4.filled;if(participant){var items=[],participantt=_this.callsService.getParticipant(participant.get("userId")),stream=participantt&&participantt.get("stream")&&participantt.get("stream");if(type!==types.r.NO&&(items.push({type:ContexMenu.a.COMPONENT,content:Object(jsx_runtime.jsx)(MenuItem.a,{onClick:function onClick(){_this.callsService.setFitFrameForParticipant(id,filled),_this.contextMenuService.close()},children:Object(jsx_runtime.jsx)(Typography.a,{children:filled?Object(localization.a)("workspaces","fit_frame"):Object(localization.a)("workspaces","fill_frame")})})}),stream)){items.push({type:ContexMenu.a.COMPONENT,content:Object(jsx_runtime.jsx)(ConnectionStatsContextItem,{getConnectionStats:function getConnectionStats(){var settings=stream.track.getSettings();settings.frameRate&&(settings.frameRate=Math.round(settings.frameRate));var callMetrics=_this.callsService.getMetrics(),thisMetrics=callMetrics[stream.getParticipantId()]||callMetrics.me||{};return{trackMetrics:ConferenceCall_objectSpread(ConferenceCall_objectSpread({},settings),thisMetrics),callMetrics:thisMetrics}}})})}items.length&&_this.contextMenuService.show({top:event.pageY,left:event.pageX,items:items,style:{zIndex:1100,borderRadius:_this.props.theme.shape.borderRadius,paddingTop:_this.props.theme.spacing(1),paddingBottom:_this.props.theme.spacing(1)}})}})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleFitAllFrames",(function(_ref5){var _step,fit=_ref5.fit,_iterator=_createForOfIteratorHelper(participantSimpleId);try{for(_iterator.s();!(_step=_iterator.n()).done;){var row=_step.value;fit?_this.callsService.setFitFrame(row):_this.callsService.setFillFrame(row)}}catch(err){_iterator.e(err)}finally{_iterator.f()}_this.callsService.setFitFill(fit?"fit":"fill")})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"showScreenShareMenu",(function(event,hasScreenStream){_this.toggleScreenShare(hasScreenStream)})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"setView",(function(view){_this.callsService.setPopupView(view),_this.callsService.setFullscreenView(view)})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"showConferenceMenu",(function(event){var _this$checkParticipan=_this.checkParticipants(),mainVideoList=_this$checkParticipan.mainVideoList,otherVideoList=_this$checkParticipan.otherVideoList,allVideoList=[].concat(_toConsumableArray(mainVideoList),_toConsumableArray(otherVideoList)),items=[{name:viewTypes_translateViewType(types.s.NORMAL).title,icon:viewTypes_translateViewType(types.s.NORMAL).getIcon(),active:_this.props.popupView===types.s.NORMAL,action:function action(){_this.setView(types.s.NORMAL)}},{name:viewTypes_translateViewType(types.s.FEATURED).title,icon:viewTypes_translateViewType(types.s.FEATURED).getIcon(),active:_this.props.popupView===types.s.FEATURED,action:function action(){_this.setView(types.s.FEATURED)}},{name:viewTypes_translateViewType(types.s.GRID).title,icon:viewTypes_translateViewType(types.s.GRID).getIcon(),active:_this.props.popupView===types.s.GRID,action:function action(){_this.setView(types.s.GRID)}},{type:ContexMenu.a.DIVIDER}];(allVideoList.length>1&&_this.state.showMyself||!_this.state.showMyself)&&items.push({name:Object(localization.a)("workspaces","show_myself"),icon:_this.state.showMyself?Object(jsx_runtime.jsx)(CheckIcon.a,{}):null,active:_this.state.showMyself,action:function action(){_this.toggleShowMyself()}}),items.push({name:Object(localization.a)("workspaces","allow_incoming_video"),icon:_this.props.allowIncomingVideo?Object(jsx_runtime.jsx)(CheckIcon.a,{}):null,active:_this.props.allowIncomingVideo,action:function action(){var participantIds=Object.keys(_this.shadowState.screenShareStreams),mainVideoArray=participantIds.map((function(id){return{userId:id}}));_this.dynamicStreamQuality({mainVideoArray:mainVideoArray}),_this.callsService.toggleAllowIncomingVideo(participantIds)}},{type:ContexMenu.a.DIVIDER},{name:Object(localization.a)("workspaces","fill_frame"),active:"fill"===_this.props.fitfill,action:function action(){_this.toggleFitAllFrames({fit:!1})}},{name:Object(localization.a)("workspaces","fit_frame"),active:"fit"===_this.props.fitfill,action:function action(){_this.toggleFitAllFrames({fit:!0})}}),_this.contextMenuService.show({top:event.pageY,left:event.pageX,items:items,style:{borderRadius:"5px",overflow:"hidden"}})})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"showAudioInputDevices",function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(event){var top,left,availableDevices,audioInputDeviceState,isMuted,audioInput,audioInputDevice,items;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return top=event.pageY,left=event.pageX,_context4.next=4,_this.callsService.getDevices();case 4:if(availableDevices=_this.callsService.getAvailableDevices(),audioInputDeviceState=_this.callsService.getAudioInputDevice(),isMuted=!_this.state.myParticipantId||!!Object(immutableUtils.g)(_this.props.muted).get(_this.state.myParticipantId),audioInput=null,audioInputDevice=null,availableDevices.toJS?(audioInput=availableDevices.toJS().audioInputDevices,audioInputDevice=Object(immutableUtils.f)(audioInputDeviceState)):(audioInput=availableDevices.audioInputDevices,audioInputDevice=audioInputDeviceState),audioInput){_context4.next=12;break}return _context4.abrupt("return");case 12:audioInputDevice.toJS&&(audioInputDevice=Object(immutableUtils.f)(audioInputDeviceState)),audioInputDevice&&audioInputDevice.audioInputDevice&&(audioInputDevice=audioInputDevice.audioInputDevice),audioInput.length<=1?_this.toggleMicrophone():(items=[{name:isMuted?Object(localization.a)("tooltips","unmute_mic"):Object(localization.a)("tooltips","mute_mic"),action:_this.toggleMicrophone}],audioInput.forEach((function(device){items.push({name:device.label,action:function action(){audioInputDevice&&device.deviceId!==audioInputDevice.deviceId&&(_this.callsService.selectAudioInputDevice(device),_this.callsService.selectAudioInput(device.deviceId),isMuted&&_this.toggleMicrophone())},active:audioInputDevice&&device.deviceId===audioInputDevice.deviceId,disabled:audioInputDevice&&device.deviceId===audioInputDevice.deviceId})})),_this.contextMenuService.show({items:items,top:top,left:left}));case 15:case"end":return _context4.stop()}}),_callee4)})));return function(_x4){return _ref6.apply(this,arguments)}}()),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleVideo",_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var participant;return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(participant=_this.callsService.getParticipant(_this.state.myParticipantId),!(participant&&participant.get("stream")&&participant.get("stream").stream)){_context5.next=8;break}return _context5.next=5,_this.callsService.stopVideo(_this.state.myParticipantId);case 5:_this.callsService.setCamera(!1),_context5.next=12;break;case 8:return _context5.next=10,_this.callsService.startVideo(_this.state.myParticipantId);case 10:_context5.sent&&_this.callsService.setCamera(!0);case 12:case"end":return _context5.stop()}}),_callee5)})))),ConferenceCall_defineProperty(_assertThisInitialized(_this),"showVideoInputDevices",function(){var _ref8=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(event){var top,left,availableDevices,videoInputDeviceState,videoInput,videoInputDevice;return regeneratorRuntime.wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return top=event.pageY,left=event.pageX,_context8.next=4,_this.callsService.getDevices();case 4:if(availableDevices=_this.callsService.getAvailableDevices(),videoInputDeviceState=_this.callsService.getVideoInputDevice(),videoInput=null,videoInputDevice=null,availableDevices.toJS?(videoInput=availableDevices.toJS().videoInputDevices,videoInputDevice=Object(immutableUtils.f)(videoInputDeviceState)):(videoInput=availableDevices.videoInputDevices,videoInputDevice=videoInputDeviceState),videoInput){_context8.next=11;break}return _context8.abrupt("return");case 11:if(videoInputDevice.toJS&&(videoInputDevice=Object(immutableUtils.f)(videoInputDeviceState)),videoInputDevice&&videoInputDevice.videoInputDevice&&(videoInputDevice=videoInputDevice.videoInputDevice),!(videoInput.length<=1)){_context8.next=18;break}return _context8.next=16,_this.toggleVideo();case 16:_context8.next=20;break;case 18:return _context8.next=20,new Promise((function(resolve,reject){var _action,participant=_this.callsService.getParticipant(_this.state.myParticipantId),items=[{name:participant&&participant.get("stream")&&participant.get("stream").stream?Object(localization.a)("tooltips","disable_camera"):Object(localization.a)("tooltips","enable_camera"),action:(_action=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _this.contextMenuService.close(),_context6.next=3,_this.toggleVideo();case 3:resolve(!0);case 4:case"end":return _context6.stop()}}),_callee6)}))),function action(){return _action.apply(this,arguments)})}];videoInput.forEach((function(device){var _action2;items.push({name:device.label,action:(_action2=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){return regeneratorRuntime.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:videoInputDevice&&device.deviceId!==videoInputDevice.deviceId&&(_this.contextMenuService.close(),_this.callsService.selectVideoInputDevice(device),_this.callsService.selectVideoInput(device)),resolve(!0);case 2:case"end":return _context7.stop()}}),_callee7)}))),function action(){return _action2.apply(this,arguments)}),active:videoInputDevice&&device.deviceId===videoInputDevice.deviceId,disabled:videoInputDevice&&device.deviceId===videoInputDevice.deviceId})})),_this.contextMenuService.show({items:items,top:top,left:left,onHide:function onHide(){resolve(!0)}})}));case 20:case"end":return _context8.stop()}}),_callee8)})));return function(_x5){return _ref8.apply(this,arguments)}}()),ConferenceCall_defineProperty(_assertThisInitialized(_this),"showAudioOutputDevices",function(){var _ref9=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(event){var top,left,_yield$_this$callsSer,audioOutput,audioOutputDeviceState,audioOutputDevice,items;return regeneratorRuntime.wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return top=event.pageY,left=event.pageX,_context9.next=4,_this.callsService.getDevices();case 4:if(_yield$_this$callsSer=_context9.sent,audioOutput=_yield$_this$callsSer.audioOutput){_context9.next=8;break}return _context9.abrupt("return");case 8:audioOutputDeviceState=_this.callsService.getAudioOutputDevice(),(audioOutputDevice=Object(immutableUtils.f)(audioOutputDeviceState)).toJS&&(audioOutputDevice=Object(immutableUtils.f)(audioOutputDeviceState)),audioOutputDevice&&audioOutputDevice.audioOutputDevice&&(audioOutputDevice=audioOutputDevice.audioOutputDevice),audioOutput.length<=1||!browserDetect.a.isChrome()?_this.toggleSound():(items=[{name:_this.props.sound?Object(localization.a)("tooltips","mute_sound"):Object(localization.a)("tooltips","unmute_sound"),action:_this.toggleSound}],audioOutput.map((function(device){items.push({name:device.label,action:function action(){audioOutputDevice&&device.deviceId!==audioOutputDevice.deviceId&&(_this.callsService.selectAudioOutputDevice(device),_this.changeAudioOutputDevice(device.deviceId))},active:audioOutputDevice&&device.deviceId===audioOutputDevice.deviceId,disabled:audioOutputDevice&&device.deviceId===audioOutputDevice.deviceId})})),_this.contextMenuService.show({items:items,top:top,left:left}));case 13:case"end":return _context9.stop()}}),_callee9)})));return function(_x6){return _ref9.apply(this,arguments)}}()),ConferenceCall_defineProperty(_assertThisInitialized(_this),"triggerShare",(function(event){var hasScreenStream=_this.callsService.isScreenSharing();_this.contextMenuService.show({top:event.pageY,left:event.pageX,items:[{name:hasScreenStream?Object(localization.a)("workspaces","screenShareOff"):Object(localization.a)("workspaces","screenShareOn"),action:function action(){_this.contextMenuService.close(),hasScreenStream?_this.toggleScreenShare(hasScreenStream):_this.showScreenShareMenu(event,hasScreenStream)},icon:Object(jsx_runtime.jsx)(ScreenShareIcon.a,{working:!0,fill:hasScreenStream?"#fff":"#000",width:"18",height:"18"}),containerStyles:{backgroundColor:hasScreenStream?"#07BBC7":"#fff"},style:{color:hasScreenStream?"#fff":"#262626"}},{type:"DIVIDER"}]})})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"dynamicStreamQuality",(function(data){_this.alreadySetParticipants=[];var simulcastRequest=[];if(data&&data.mainVideoArray)for(var i=0;i<data.mainVideoArray.length;i++)-1===_this.alreadySetParticipants.indexOf(data.mainVideoArray[i].userId)&&(1===data.mainVideoArray.length?(simulcastRequest.push({id:data.mainVideoArray[i].userId,quality:"hd"}),_this.alreadySetParticipants.push(data.mainVideoArray[i].userId)):simulcastRequest.push({id:data.mainVideoArray[i].userId,quality:"sd"}));if(data&&data.otherVideoArray)for(var _i2=0;_i2<data.otherVideoArray.length;_i2++)-1===_this.alreadySetParticipants.indexOf(data.otherVideoArray[_i2].userId)&&(simulcastRequest.push({id:data.otherVideoArray[_i2].userId,quality:"ld"}),_this.alreadySetParticipants.push(data.otherVideoArray[_i2].userId));try{_this.callsService.setQualityForParticipants(simulcastRequest,128)}catch(e){}})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"setMaxVideoIncoming",(function(data){_this.callsService.setMaxVideoIncoming(data)})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"changeAudioOutputDevice",(function(deviceId){var elements=document.getElementsByClassName("conference-audio-element");if(elements&&elements.length)for(var i=0;i<elements.length;i++)elements[i].setSinkId(deviceId)})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"formateVideoLists",(function(){var _this$state=_this.state,autoSelect=_this$state.autoSelect,autoSelectedStream=_this$state.autoSelectedStream,showMyself=_this$state.showMyself,selectedStream=_this$state.selectedStream,pinnedVideos=Object(immutableUtils.g)(_this.props.pinnedVideos||{}),favouriteVideos=Object(immutableUtils.g)(_this.props.autoPinnedVideos||{}),size=favouriteVideos.keySeq().size;if(size<types.k){var _step2,index=size+1,_iterator2=_createForOfIteratorHelper(pinnedVideos);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var array=_step2.value;if(favouriteVideos=favouriteVideos.set(array[0],index),++index>types.k)break}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}if(participantSimpleId=[],!_this.state.participantsIds.length)return{autoSelectedStream:null,mainVideoList:[],otherVideoList:[],selfParticipant:null};for(var me=null,myParticipantId=_this.callsService.getMyId(),allVideoList=[],i=0;i<_this.state.participantsIds.length;i++){var participantId=_this.state.participantsIds[i],participant=_this.callsService.getParticipant(participantId);if(participant){var userId=participant.get("userId"),connectionStatus=_this.state.participantsConnectionStatus[participantId],audioStream=_this.state.audioStreams[participantId],stream=_this.state.streams[participantId],screenShareStream=_this.state.screenShareStreams[participantId],everyVideoPredicate=Object(CallManager_const.a)(types.p.VIDEO),everyScreenPredicate=Object(CallManager_const.a)(types.p.SCREEN),isCameraStreamMuted=everyVideoPredicate(participant),isScreenShareStreamMuted=everyScreenPredicate(participant),hasCameraStream=!1,hasScreenStream=!1,microphoneState=!1;_this.props.selectedCallProvider===types.c.JITSI&&(hasCameraStream=connectionStatus===CallsService.e.ACTIVE&&stream&&!0,hasScreenStream=connectionStatus===CallsService.e.ACTIVE&&screenShareStream&&!0,participant.get("audioStream")&&(microphoneState=!participant.get("audioStream").muted)),userId===myParticipantId&&(microphoneState=!!_this.props.microphone);var isStreamMutedByMe=!1,isStreamMuted=!1;isStreamMutedByMe=_this.props.muted.get?!!_this.props.muted.get(userId):!!_this.props.muted[userId],participant.get("audioStream")&&participant.get("audioStream").muted&&(isStreamMuted=!0),(isCameraStreamMuted||participant.get("stream")&&Object(CallManager_const.d)(participant.get("stream")))&&(hasCameraStream=!1),(isScreenShareStreamMuted||participant.get("screenShareStream")&&Object(CallManager_const.d)(participant.get("screenShareStream")))&&(hasScreenStream=!1),audioStream&&Object(CallManager_const.c)(participant.get("audioStream"))&&(isStreamMuted=!0);var commonFields={userId:userId,microphone:microphoneState,muted:isStreamMutedByMe||isStreamMuted,secondStream:!1,participant:participant};if(hasScreenStream||hasCameraStream){if(hasScreenStream){var type=types.r.SCREEN,id=userId+"/"+type,filled=void 0;"fill"===_this.props.fitfill?filled=!0:"fit"===_this.props.fitfill&&(filled=!1),_this.props.fittedFrameVideos.toJS?(filled=!_this.props.fittedFrameVideos.get(id),"boolean"!=typeof _this.props.fittedFrameVideos.get(id)&&(filled=!1)):(filled=!_this.props.fittedFrameVideos[id],id in _this.props.fittedFrameVideos||(filled=!1)),participantSimpleId.push(id);var object=ConferenceCall_objectSpread(ConferenceCall_objectSpread({id:id,stream:screenShareStream,audioStream:audioStream,hasScreenStream:!0,type:type,filled:filled},commonFields),{},{volume:0,secondStream:hasCameraStream,selected:id===selectedStream&&!favouriteVideos.has(userId),favourite:favouriteVideos.get(userId),connectionStatus:connectionStatus});participantId===_this.callsService.getMyId()&&(me=object),(showMyself||userId!==myParticipantId)&&allVideoList.push(object)}if(hasCameraStream){var _type=types.r.CAMERA,_id=userId+"/"+_type,_filled=void 0;"fill"===_this.props.fitfill?_filled=!0:"fit"===_this.props.fitfill&&(_filled=!1),_this.props.fittedFrameVideos.toJS?(_filled=!_this.props.fittedFrameVideos.get(_id),"boolean"!=typeof _this.props.fittedFrameVideos.get(_id)&&(_filled=!1)):(_filled=!_this.props.fittedFrameVideos[_id],_id in _this.props.fittedFrameVideos||(_filled=!1)),participantSimpleId.push(_id);var _object=ConferenceCall_objectSpread(ConferenceCall_objectSpread({id:_id,stream:stream,audioStream:audioStream,hasScreenStream:!1,type:_type,filled:_filled},commonFields),{},{selected:_id===selectedStream&&!favouriteVideos.has(userId),favourite:favouriteVideos.get(userId),connectionStatus:connectionStatus});participantId===_this.callsService.getMyId()&&(me=_object),(showMyself||userId!==myParticipantId)&&allVideoList.push(_object)}}else{var _type2=types.r.NO,_id2=userId+"/"+_type2;participantSimpleId.push(_id2);var _object2=ConferenceCall_objectSpread(ConferenceCall_objectSpread({id:_id2,stream:null,audioStream:audioStream,hasScreenStream:!1,type:_type2,filled:!_this.props.fittedFrameVideos[_id2]},commonFields),{},{selected:_id2===selectedStream&&!favouriteVideos.has(userId),favourite:favouriteVideos.get(userId),connectionStatus:connectionStatus});participantId===_this.callsService.getMyId()&&(me=_object2),(showMyself||userId!==myParticipantId)&&allVideoList.push(_object2)}}}if(!allVideoList.length)return{autoSelectedStream:null,mainVideoList:[],otherVideoList:[],selfParticipant:null};var speaker={volume:types.o};if(selectedStream){var _step3,_iterator3=_createForOfIteratorHelper(allVideoList);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){_step3.value.speaking=!1}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}else{var _step4,_iterator4=_createForOfIteratorHelper(allVideoList);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _row=_step4.value;_row.speaking=_row.volume>types.o,_row.mainSpeaker=autoSelect&&!_row.muted&&_row.userId===_this.state.dominantSpeaker&&!_row.secondStream,_row.mainSpeaker&&(speaker.id=_row.id)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}!speaker.id&&autoSelect&&(speaker.id=autoSelectedStream)}var mainVideoArray=[],lengthAll=allVideoList.length;allVideoList.sort((function(a,b){return a.participant.get("participantIndex")>b.participant.get("participantIndex")?1:a.participant.get("participantIndex")<b.participant.get("participantIndex")?-1:0})),allVideoList.sort((function(a,b){return a.hasScreenStream?b.hasScreenStream?0:-11:b.hasScreenStream?a.hasScreenStream?0:1:0}));for(var _i3=0;_i3<lengthAll;_i3++)allVideoList[_i3].favourite&&mainVideoArray.push(allVideoList[_i3]);mainVideoArray.sort((function(a,b){return a.favourite-b.favourite}));if(mainVideoArray.length<4&&function addDominantSpeakerToMainList(){for(var item,lengthAll3=allVideoList.length,_i4=0;_i4<lengthAll3;_i4++)if(selectedStream){if(allVideoList[_i4].selected){item=allVideoList[_i4];break}}else if(autoSelect&&!allVideoList[_i4].muted&&allVideoList[_i4].userId===_this.state.dominantSpeaker){item=allVideoList[_i4];break}if(item&&!item.favourite)mainVideoArray.push(item);else if(autoSelect){var dominantSpeakerId=_this.state.dominantSpeaker;if(dominantSpeakerId)for(var _i5=0;_i5<allVideoList.length;_i5++){var isDominantSpeaker=allVideoList[_i5].participant.get("userId")===dominantSpeakerId,isFavourite=allVideoList[_i5].favourite;if(isDominantSpeaker&&!isFavourite){mainVideoArray.push(allVideoList[_i5]);break}}}}(),!mainVideoArray.length&&autoSelect)for(var _i6=0;_i6<allVideoList.length;_i6++){var _row2=allVideoList[_i6];if(_row2.userId!==myParticipantId&&_row2.mainSpeaker){mainVideoArray.push(_row2),allVideoList.splice(_i6,1);break}}if(!mainVideoArray.length)if(1===allVideoList.length)mainVideoArray.push(allVideoList[0]),allVideoList.splice(0,1);else for(var _i7=0;_i7<allVideoList.length;_i7++){var _row3=allVideoList[_i7];if(_row3.userId!==myParticipantId){mainVideoArray.push(_row3),allVideoList.splice(_i7,1);break}}for(var mainIds=[],length=mainVideoArray.length,_i8=0;_i8<length;_i8++)mainIds.push(mainVideoArray[_i8].id);for(var otherVideoArray=[],lengthAll2=allVideoList.length,_i9=0;_i9<lengthAll2;_i9++)mainIds.includes(allVideoList[_i9].id)||otherVideoArray.push(allVideoList[_i9]);for(var myIndex=-1,lengthOther=otherVideoArray.length,_i10=0;_i10<lengthOther;_i10++)if(otherVideoArray[_i10].userId===myParticipantId){myIndex=_i10;break}if(myIndex>=0){var value,_row4=otherVideoArray[myIndex];otherVideoArray.splice(myIndex,1),otherVideoArray[0]&&otherVideoArray[0].userId===myParticipantId&&otherVideoArray[0].type===types.r.CAMERA&&_row4.type===types.r.SCREEN?otherVideoArray.splice(1,0,_row4):otherVideoArray.unshift(_row4),value=_this.props.fittedFrameVideos.toJS?"boolean"!=typeof _this.props.fittedFrameVideos.get(_row4.id):!(_row4.id in _this.props.fittedFrameVideos),_row4.type!==types.r.NO&&!favouriteVideos.has(_row4.userId)&&value&&(_row4.filled=!1)}return _this.props.allowIncomingVideo&&_this.dynamicStreamQuality({autoSelectedStream:speaker.id,mainVideoArray:mainVideoArray,otherVideoArray:otherVideoArray}),{autoSelectedStream:speaker.id,mainVideoList:[].concat(mainVideoArray),otherVideoList:[].concat(otherVideoArray),selfParticipant:me}})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"checkParticipants",(function(){return _this.formateVideoLists()})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"toggleAutoSelect",(function(){var autoSelect=_this.state.autoSelect;_this.setState({autoSelect:!autoSelect,selectedStream:null})})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"clearSelectedStream",(function(){_this.setState({autoSelect:!1,selectedStream:null})})),ConferenceCall_defineProperty(_assertThisInitialized(_this),"mapFollowState",(function(followState){var userUuid=_this.props.currentUser.uuid;return{activeAreas:followState.filter((function(state){return state.get("userUuid")===userUuid})).reduce((function(out,state){return out[state.get("area")]=state.get("id"),out}),{})}})),_this.state=ConferenceCall_objectSpread(ConferenceCall_objectSpread({autoSelect:!0,selectedStream:null,showMyself:!0,calling:!1,docalled:!1,canPin:!1},_this.shadowState),{},{myParticipantId:null,dominantSpeaker:null,updated:!1,isMouseMoving:!1}),_this.callsService=props.getBeanInstance(CallsService.a),_this.userChatsService=props.getBeanInstance(PopupChatService.a),_this.contextMenuService=props.getBeanInstance(ContextMenuService.a),_this.audioRef=react_default.a.createRef(),_this.alreadySetParticipants=[],_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ConferenceCall,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState,nextContext){return Object(performanceUtils.a)(this.state,nextState,["participantsConnectionStatus"],[],["participantsIds","streams","audioStreams","screenShareStreams"])||Object(performanceUtils.a)(this.props,nextProps)}},{key:"componentDidMount",value:function componentDidMount(){var canPin=Object(browser_compat_utils.a)().width>=this.props.minConnectWidth+types.i.width;canPin!==this.state.canPin&&this.setState({canPin:canPin});var myUserId=this.callsService.getMyId(),participants=this.callsService.getParticipants(),participantsIds=[],participantsConnectionStatus={},streams={},audioStreams={},screenShareStreams={};participants.entrySeq().forEach((function(participant){var key=participant[0],value=participant[1];participantsIds.push(key),participantsConnectionStatus[key]=value.get("connectionStatus"),streams[key]=value.get("stream"),audioStreams[key]=value.get("audioStream"),screenShareStreams[key]=value.get("screenShareStream")})),this.setState({myParticipantId:myUserId}),this.setShadowState({participantsIds:participantsIds,participantsConnectionStatus:participantsConnectionStatus,streams:streams,audioStreams:audioStreams,screenShareStreams:screenShareStreams}),window.addEventListener("resize",this.onWindowResize),window.addEventListener("conference",this.onConferenceUpdated),this._mouseMovementStopHandling()}},{key:"_mouseMovementStopHandling",value:function _mouseMovementStopHandling(){var _this3=this;this.intervalId=setInterval((function(){_this3.state.isMouseMoving&&new Date-_this3.timeValueForDetectingMouseMovement>3e3&&_this3.endMouseMoving()}),500)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState,snapshot){if(prevProps.beforeCall!==this.props.beforeCall&&!this.state.beforeCall){this.setState({calling:!0});var isMobileView=this.props.containerWidth<sizeConstants.a;!this.props.callWindowView===types.d.FULL_SCREEN&&isMobileView&&this.callsService.selectCallWindowView(types.d.FLOAT)}this.state.calling&&this.state.participantsIds.length>1&&(this.audioRef&&this.audioRef.current&&this.audioRef.current.pause(),this.setState({calling:!1,docalled:!0}),this.playDocalledSound()),prevProps.popupView!==this.props.popupView&&(this.props.popupView===types.s.FEATURED?this.setMaxVideoIncoming(1):this.setMaxVideoIncoming(-1)),this.props.canPinCallWindowToRightOrLeftColumn||this.props.callWindowView!==types.d.PIN_RIGHT_COLUMN&&this.props.callWindowView!==types.d.PIN_LEFT_COLUMN||this.callsService.selectCallWindowView(types.d.FLOAT)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.shadowStateDebounce&&(clearTimeout(this.shadowStateDebounce),this.shadowStateDebounce=null),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("conference",this.onConferenceUpdated),this._clearMouseMovementInterval()}},{key:"_clearMouseMovementInterval",value:function _clearMouseMovementInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}},{key:"render",value:function render(){var _this4=this;if(this.props.status===types.f.BUSY&&!this.props.beforeCall)return Object(jsx_runtime.jsx)("div",{className:Conference_default.a.conferenceContainer,children:Object(jsx_runtime.jsx)(Spinner.a,{})});if(!Array.isArray(this.props.showBlocks)||this.props.showBlocks.includes(Popup_const.a.BEFORE)&&this.props.beforeCall||this.props.showBlocks.includes(Popup_const.a.AFTER)&&this.props.conference){var _classNames,_this$state2=this.state,autoSelect=_this$state2.autoSelect,selectedStream=_this$state2.selectedStream,showMyself=_this$state2.showMyself,docalled=_this$state2.docalled,_this$checkParticipan2=this.checkParticipants(),autoSelectedStream=_this$checkParticipan2.autoSelectedStream,mainVideoList=_this$checkParticipan2.mainVideoList,otherVideoList=_this$checkParticipan2.otherVideoList,selfParticipant=_this$checkParticipan2.selfParticipant;return Object(jsx_runtime.jsx)("div",{className:classnames_default()(Conference_default.a.conferenceContainer,(_classNames={},ConferenceCall_defineProperty(_classNames,Conference_default.a.column,this.props.callWindowView!==types.d.PIN_RIGHT_COLUMN||this.props.callWindowView!==types.d.PIN_LEFT_COLUMN),ConferenceCall_defineProperty(_classNames,Conference_default.a.endMoving,!this.state.isMouseMoving),_classNames)),onMouseMove:this.mouseMove,children:this.props.workspace&&Object(jsx_runtime.jsxs)(ThemeProvider.a,{theme:conferenceTheme.a,children:[Object(jsx_runtime.jsx)("audio",{ref:this.audioRef,autoPlay:!0,muted:!this.props.sound,loop:!0}),Object(jsx_runtime.jsx)(FollowSessionsProvider.a,{workspaceUuid:this.props.workspace.uuid,mapState:this.mapFollowState,children:function children(data){var _data$activeAreas=data.activeAreas,activeAreas=void 0===_data$activeAreas?{}:_data$activeAreas,followStore=data.followStore;return Object(jsx_runtime.jsx)(Popup,{outerSize:{height:_this4.props.height,width:_this4.props.width},localConnectionStropheWebsocketStatus:_this4.props.localConnectionStropheWebsocketStatus,localParticipantConnectionState:_this4.props.localParticipantConnectionState,localParticipantRoomConnectionState:_this4.props.localParticipantRoomConnectionState,activeAreas:activeAreas,followStore:followStore,followSessions:followStore.getState(),mapFollowState:_this4.mapFollowState,autoSelect:autoSelect,autoSelectedStream:autoSelectedStream,myParticipantId:_this4.state.myParticipantId,selectedStream:selectedStream,mainVideoList:mainVideoList,otherVideoList:otherVideoList,selfParticipant:selfParticipant,showMyself:showMyself,showBlocks:_this4.props.showBlocks,docalled:docalled,isPopout:_this4.props.isPopout,callWindowView:_this4.props.callWindowView,callManagerView:_this4.props.callManagerView,activeWorkspaceUuid:_this4.props.activeWorkspaceUuid,containerWidth:_this4.props.containerWidth,showChat:_this4.props.showChat,beforeCall:_this4.props.beforeCall,popupView:_this4.props.popupView,conference:_this4.props.conference,callParticipants:_this4.props.callParticipants,allUserDevices:_this4.props.allUserDevices,workspace:_this4.props.workspace,rightAreaVisible:_this4.props.rightAreaVisible,unreads:_this4.props.unreads,currentUser:_this4.props.currentUser,selectedCallProvider:_this4.props.selectedCallProvider,allowIncomingVideo:_this4.props.allowIncomingVideo,guestMagicLink:_this4.props.guestMagicLink,members:_this4.props.members,userSettings:_this4.props.userSettings,accessType:_this4.props.accessType,fitfill:_this4.props.fitfill,muted:_this4.props.muted,smartShare:_this4.props.smartShare,showCallManager:_this4.props.showCallManager,requestedStream:_this4.props.requestedStream,showDirectChat:_this4.props.showDirectChat,setDirectChatActiveRoom:_this4.props.setDirectChatActiveRoom,sound:_this4.props.sound,microphone:_this4.props.microphone,camera:_this4.props.camera,showPresentationReturnButton:_this4.props.showPresentationReturnButton,startTimestamp:_this4.props.startTimestamp,canPinCallWindowToRightOrLeftColumn:_this4.props.canPinCallWindowToRightOrLeftColumn,canPin:_this4.state.canPin,permissionStatus:_this4.props.permissionStatus,toggleAutoSelect:_this4.toggleAutoSelect,clearSelectedStream:_this4.clearSelectedStream,toggleFavourite:_this4.toggleFavourite,toggleMuted:_this4.toggleMuted,toggleMicrophone:_this4.toggleMicrophone,toggleCamera:_this4.toggleCamera,toggleSound:_this4.toggleSound,toggleOtherChats:_this4.toggleOtherChats,toggleSelected:_this4.toggleSelected,toggleScreenShare:_this4.toggleScreenShare,showScreenShareMenu:_this4.showScreenShareMenu,showStreamSettingsMenu:_this4.showStreamSettingsMenu,toggleFitAllFrames:_this4.toggleFitAllFrames,changeAudioOutputDevice:_this4.changeAudioOutputDevice,showConferenceMenu:_this4.showConferenceMenu,showAudioInputDevices:_this4.showAudioInputDevices,showVideoInputDevices:_this4.showVideoInputDevices,showAudioOutputDevices:_this4.showAudioOutputDevices,triggerShare:_this4.triggerShare})}})]})})}return Object(jsx_runtime.jsx)("div",{className:Conference_default.a.conferenceContainer})}}]),ConferenceCall}(react.Component);ConferenceCall_defineProperty(ConferenceCall_ConferenceCall,"propTypes",{sound:prop_types_default.a.bool,beforeCall:prop_types_default.a.bool,height:prop_types_default.a.number,width:prop_types_default.a.number,containerWidth:prop_types_default.a.number,isJitsiDisconnected:prop_types_default.a.bool,showBlocks:prop_types_default.a.any,getBeanInstance:prop_types_default.a.func,pinnedVideos:prop_types_default.a.object,autoPinnedVideos:prop_types_default.a.object,fittedFrameVideos:prop_types_default.a.object,popupView:prop_types_default.a.string,selectedCallProvider:prop_types_default.a.string,microphone:prop_types_default.a.bool,muted:prop_types_default.a.object,fitfill:prop_types_default.a.string,showPopup:prop_types_default.a.any,hideDirectChat:prop_types_default.a.func,showDirectChat:prop_types_default.a.func,pinPopup:prop_types_default.a.bool,status:prop_types_default.a.any,camera:prop_types_default.a.any,theme:prop_types_default.a.object,conference:prop_types_default.a.object,workspace:prop_types_default.a.object,currentUser:prop_types_default.a.object,callWindowView:prop_types_default.a.string,callManagerView:prop_types_default.a.string,activeWorkspaceUuid:prop_types_default.a.string,showChat:prop_types_default.a.bool,unreads:prop_types_default.a.object,callParticipants:prop_types_default.a.object,allUserDevices:prop_types_default.a.any,rightAreaVisible:prop_types_default.a.bool,allowIncomingVideo:prop_types_default.a.bool,guestMagicLink:prop_types_default.a.string,members:prop_types_default.a.object,isPopout:prop_types_default.a.bool,userSettings:prop_types_default.a.object,accessType:prop_types_default.a.any,smartShare:prop_types_default.a.any,showCallManager:prop_types_default.a.bool,requestedStream:prop_types_default.a.any,setDirectChatActiveRoom:prop_types_default.a.func,showPresentationReturnButton:prop_types_default.a.bool,startTimestamp:prop_types_default.a.any,canPinCallWindowToRightOrLeftColumn:prop_types_default.a.bool,minConnectWidth:prop_types_default.a.number,me:prop_types_default.a.object,permissionStatus:prop_types_default.a.object,localConnectionStropheWebsocketStatus:prop_types_default.a.string,localParticipantConnectionState:prop_types_default.a.string,localParticipantRoomConnectionState:prop_types_default.a.string}),ConferenceCall_defineProperty(ConferenceCall_ConferenceCall,"whyDidYouRender",!1),ConferenceCall_defineProperty(ConferenceCall_ConferenceCall,"defaultProps",{});var ConferenceCall_mapDispatchToProps={showDirectChat:usersChatsActions.J,hideDirectChat:usersChatsActions.G,setDirectChatActiveRoom:usersChatsActions.I};ConferenceCall_ConferenceCall.__docgenInfo={description:"",methods:[{name:"_mouseMovementStopHandling",docblock:null,modifiers:[],params:[],returns:null},{name:"endMouseMoving",docblock:null,modifiers:[],params:[],returns:null},{name:"_clearMouseMovementInterval",docblock:null,modifiers:[],params:[],returns:null},{name:"mouseMove",docblock:null,modifiers:[],params:[],returns:null},{name:"setShadowState",docblock:null,modifiers:[],params:[{name:"obj",type:null}],returns:null},{name:"onWindowResize",docblock:null,modifiers:[],params:[],returns:null},{name:"onConferenceUpdated",docblock:null,modifiers:[],params:[{name:"data",type:null}],returns:null},{name:"playCallingSound",docblock:null,modifiers:[],params:[],returns:null},{name:"playDocalledSound",docblock:null,modifiers:[],params:[],returns:null},{name:"toggleFavourite",docblock:null,modifiers:[],params:[{name:"id",type:null}],returns:null},{name:"toggleMuted",docblock:null,modifiers:[],params:[{name:"userId",type:null}],returns:null},{name:"toggleMicrophone",docblock:null,modifiers:[],params:[],returns:null},{name:"toggleCamera",docblock:null,modifiers:[],params:[],returns:null},{name:"toggleSound",docblock:null,modifiers:[],params:[],returns:null},{name:"toggleSelected",docblock:null,modifiers:["async"],params:[{name:"id",type:null},{name:"isGoToFullScreen",type:null}],returns:null},{name:"toggleOtherChats",docblock:null,modifiers:[],params:[{name:"save",type:null}],returns:null},{name:"toggleScreenShare",docblock:null,modifiers:["async"],params:[{name:"hasScreenStream",type:null},{name:"id",type:null}],returns:null},{name:"toggleShowMyself",docblock:null,modifiers:[],params:[],returns:null},{name:"showStreamSettingsMenu",docblock:null,modifiers:[],params:[{name:"{event, participant, id, type, filled}",type:null}],returns:null},{name:"toggleFitAllFrames",docblock:null,modifiers:[],params:[{name:"{fit}",type:null}],returns:null},{name:"showScreenShareMenu",docblock:null,modifiers:[],params:[{name:"event",type:null},{name:"hasScreenStream",type:null}],returns:null},{name:"setView",docblock:null,modifiers:[],params:[{name:"view",type:null}],returns:null},{name:"showConferenceMenu",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"showAudioInputDevices",docblock:null,modifiers:["async"],params:[{name:"event",type:null}],returns:null},{name:"toggleVideo",docblock:null,modifiers:["async"],params:[],returns:null},{name:"showVideoInputDevices",docblock:null,modifiers:["async"],params:[{name:"event",type:null}],returns:null},{name:"showAudioOutputDevices",docblock:null,modifiers:["async"],params:[{name:"event",type:null}],returns:null},{name:"triggerShare",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"dynamicStreamQuality",docblock:null,modifiers:[],params:[{name:"data",type:null}],returns:null},{name:"setMaxVideoIncoming",docblock:null,modifiers:[],params:[{name:"data",type:null}],returns:null},{name:"changeAudioOutputDevice",docblock:null,modifiers:[],params:[{name:"deviceId",type:null}],returns:null},{name:"formateVideoLists",docblock:null,modifiers:[],params:[],returns:null},{name:"checkParticipants",docblock:null,modifiers:[],params:[],returns:null},{name:"toggleAutoSelect",docblock:null,modifiers:[],params:[],returns:null},{name:"clearSelectedStream",docblock:null,modifiers:[],params:[],returns:null},{name:"mapFollowState",docblock:null,modifiers:[],params:[{name:"followState",type:null}],returns:null}],displayName:"ConferenceCall",props:{sound:{type:{name:"bool"},required:!1,description:""},beforeCall:{type:{name:"bool"},required:!1,description:""},height:{type:{name:"number"},required:!1,description:""},width:{type:{name:"number"},required:!1,description:""},containerWidth:{type:{name:"number"},required:!1,description:""},isJitsiDisconnected:{type:{name:"bool"},required:!1,description:""},showBlocks:{type:{name:"any"},required:!1,description:""},getBeanInstance:{type:{name:"func"},required:!1,description:""},pinnedVideos:{type:{name:"object"},required:!1,description:""},autoPinnedVideos:{type:{name:"object"},required:!1,description:""},fittedFrameVideos:{type:{name:"object"},required:!1,description:""},popupView:{type:{name:"string"},required:!1,description:""},selectedCallProvider:{type:{name:"string"},required:!1,description:""},microphone:{type:{name:"bool"},required:!1,description:""},muted:{type:{name:"object"},required:!1,description:""},fitfill:{type:{name:"string"},required:!1,description:""},showPopup:{type:{name:"any"},required:!1,description:""},hideDirectChat:{type:{name:"func"},required:!1,description:""},showDirectChat:{type:{name:"func"},required:!1,description:""},pinPopup:{type:{name:"bool"},required:!1,description:""},status:{type:{name:"any"},required:!1,description:""},camera:{type:{name:"any"},required:!1,description:""},theme:{type:{name:"object"},required:!1,description:""},conference:{type:{name:"object"},required:!1,description:""},workspace:{type:{name:"object"},required:!1,description:""},currentUser:{type:{name:"object"},required:!1,description:""},callWindowView:{type:{name:"string"},required:!1,description:""},callManagerView:{type:{name:"string"},required:!1,description:""},activeWorkspaceUuid:{type:{name:"string"},required:!1,description:""},showChat:{type:{name:"bool"},required:!1,description:""},unreads:{type:{name:"object"},required:!1,description:""},callParticipants:{type:{name:"object"},required:!1,description:""},allUserDevices:{type:{name:"any"},required:!1,description:""},rightAreaVisible:{type:{name:"bool"},required:!1,description:""},allowIncomingVideo:{type:{name:"bool"},required:!1,description:""},guestMagicLink:{type:{name:"string"},required:!1,description:""},members:{type:{name:"object"},required:!1,description:""},isPopout:{type:{name:"bool"},required:!1,description:""},userSettings:{type:{name:"object"},required:!1,description:""},accessType:{type:{name:"any"},required:!1,description:""},smartShare:{type:{name:"any"},required:!1,description:""},showCallManager:{type:{name:"bool"},required:!1,description:""},requestedStream:{type:{name:"any"},required:!1,description:""},setDirectChatActiveRoom:{type:{name:"func"},required:!1,description:""},showPresentationReturnButton:{type:{name:"bool"},required:!1,description:""},startTimestamp:{type:{name:"any"},required:!1,description:""},canPinCallWindowToRightOrLeftColumn:{type:{name:"bool"},required:!1,description:""},minConnectWidth:{type:{name:"number"},required:!1,description:""},me:{type:{name:"object"},required:!1,description:""},permissionStatus:{type:{name:"object"},required:!1,description:""},localConnectionStropheWebsocketStatus:{type:{name:"string"},required:!1,description:""},localParticipantConnectionState:{type:{name:"string"},required:!1,description:""},localParticipantRoomConnectionState:{type:{name:"string"},required:!1,description:""}}};var Main_ConferenceCall=Object(es.b)((function mapStateToProps(state){var selectedCallProvider=state.getIn(["calls","selectedCallProvider"]),workspaceUuid=state.getIn(["connectScene","activeWorkspaceUuid"]),conference=state.getIn(["calls","conference"]);conference&&conference.get("workspaceUuid")&&(workspaceUuid=conference.get("workspaceUuid"));var canPinCallWindowToRightOrLeftColumn=!0,showCallManager=state.getIn([CallsService.a,"showCallManager"]),callManagerView=state.getIn([CallsService.a,"callManagerView"]),leftAreaVisible=state.getIn([ConnectSceneService.a,"leftAreaVisible"]),leftAreaWidth=state.getIn([ConnectSceneService.a,"leftAreaWidth"]),showPopupChat=state.getIn([PopupChatService.a,"showPopup"]),pinPopupChat=state.getIn([PopupChatService.a,"pinPopup"]);return mobileDetect.a.isMobile()||mobileDetect.a.isTablet()||showPopupChat&&pinPopupChat?canPinCallWindowToRightOrLeftColumn=!1:showCallManager&&callManagerView===types.b.PIN_RIGHT_COLUMN&&leftAreaVisible&&(canPinCallWindowToRightOrLeftColumn=leftAreaWidth<ConnectSceneService.b),{selectedCallProvider:selectedCallProvider,conference:conference,localConnectionStropheWebsocketStatus:state.getIn(["calls","localConnectionStropheWebsocketStatus"]),localParticipantConnectionState:state.getIn(["calls","localParticipantConnectionState"]),localParticipantRoomConnectionState:state.getIn(["calls","localParticipantRoomConnectionState"]),isPopout:state.getIn(["calls","isPopout"]),status:state.getIn(["calls","status"]),beforeCall:state.getIn(["calls","waiting"]),pinnedVideos:state.getIn(["calls","pinnedVideos"]),autoPinnedVideos:state.getIn(["calls","autoPinnedVideos"]),fittedFrameVideos:state.getIn(["calls","fittedFrameVideos"]),popupView:state.getIn(["calls","popupView"]),fitfill:state.getIn(["calls","fitfill"]),muted:state.getIn(["calls","muted"]),microphone:state.getIn(["calls","microphone"]),camera:state.getIn(["calls","camera"]),sound:state.getIn(["calls","sound"]),showPopup:state.getIn(["usersChats","showPopup"]),pinPopup:state.getIn(["usersChats","pinPopup"]),containerWidth:state.getIn(["connectScene","containerWidth"]),workspaceUuid:workspaceUuid,workspace:state.getIn(["userWorkspaces","workspaces",workspaceUuid]),currentUser:state.getIn(["session","user"]),userSettings:state.get(constants.f),callWindowView:state.getIn(["calls","callWindowView"]),callManagerView:state.getIn(["calls","callManagerView"]),waiting:state.getIn(["calls","waiting"]),activeWorkspaceUuid:state.getIn([ConnectSceneService.a,"activeWorkspaceUuid"]),showChat:state.getIn([CallsService.a,"showChat"]),callParticipants:state.getIn([CallsService.a,"participants"]),allUserDevices:state.getIn([CallsService.a,"allDevicesRelatedToUser","devicesList"]),rightAreaVisible:state.getIn([ConnectSceneService.a,"rightAreaVisible"]),unreads:state.getIn(["usersChats","unreads"]),me:state.getIn(["session","user"]),allowIncomingVideo:state.getIn([CallsService.a,"allowIncomingVideo"]),guestMagicLink:state.getIn([CallsService.a,"guestMagicLink"]),members:state.getIn([UserWorkspacesService.a,"workspaces",workspaceUuid,"members"]),accessType:state.getIn([CallsService.a,"accessType"]),smartShare:state.getIn([CallsService.a,"smartShareStream"]),showCallManager:state.getIn([CallsService.a,"showCallManager"]),requestedStream:state.getIn([CallsService.a,"requestedStream"]),showPresentationReturnButton:state.getIn([ConnectSceneService.a,"showPresentationReturnButton"]),startTimestamp:state.getIn([CallsService.a,"startTimestamp"]),canPinCallWindowToRightOrLeftColumn:canPinCallWindowToRightOrLeftColumn,minConnectWidth:state.getIn([ConnectSceneService.a,"minSceneWidth"]),permissionStatus:state.getIn([CallsService.a,"permissionStatus"])}}),ConferenceCall_mapDispatchToProps)(Object(NetworkDetector.a)(Object(lib.withInject)(Object(withTheme.a)(ConferenceCall_ConferenceCall)))),ImmutablePropTypes=__webpack_require__(458),ImmutablePropTypes_default=__webpack_require__.n(ImmutablePropTypes),DialogContent=__webpack_require__(1498),DialogActions=__webpack_require__(2287),Button=__webpack_require__(422),TextField=__webpack_require__(1544),Grid=__webpack_require__(21),Select=__webpack_require__(579),formControl_FormControl=__webpack_require__(3932).a,react_datepicker_min=__webpack_require__(4144),react_datepicker_min_default=__webpack_require__.n(react_datepicker_min),withStyles=__webpack_require__(26),withStyles_default=__webpack_require__.n(withStyles),ru=__webpack_require__(4175),ru_default=__webpack_require__.n(ru),CustomDateInput_CustomDateInput=function CustomDateInput(_ref,ref){var value=_ref.value,onClick=_ref.onClick;return Object(jsx_runtime.jsx)(TextField.a,{ref:ref,value:value,onClick:onClick,variant:"outlined",size:"small",required:!0,fullWidth:!0,name:"date"})},Datepicker_CustomDateInput=Object(react.forwardRef)(CustomDateInput_CustomDateInput),datepicker=__webpack_require__(4141),datepicker_default=__webpack_require__.n(datepicker);function Datepicker_slicedToArray(arr,i){return function Datepicker_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Datepicker_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Datepicker_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Datepicker_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Datepicker_arrayLikeToArray(o,minLen)}(arr,i)||function Datepicker_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Datepicker_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Datepicker_Datepicker=function Datepicker(props){var locale=Datepicker_slicedToArray(Object(react.useState)(localization.a.currentLanguage()),1)[0];Object(react.useEffect)((function(){"ru"===locale&&Object(react_datepicker_min.registerLocale)("ru",ru_default.a)}),[]);return Object(jsx_runtime.jsx)("div",{className:"scheduled-calls-datepicker",children:Object(jsx_runtime.jsx)(react_datepicker_min_default.a,{selected:props.value,onChange:function handleChange(date){var onChange=props.onChange;onChange&&onChange(date)},shouldCloseOnSelect:!1,customInput:Object(jsx_runtime.jsx)(Datepicker_CustomDateInput,{}),timeInputLabel:"".concat(Object(localization.a)("workspaces","scheduled_call_time"),":"),dateFormat:function getDateFormat(){return"ru"===locale?"dd MMM yyyy HH:mm zzz":"dd MMM yyyy h:mmaa zzz"}(),locale:locale,showTimeInput:!0})})};Datepicker_Datepicker.propTypes={value:prop_types_default.a.instanceOf(Date),onChange:prop_types_default.a.func.isRequired},Datepicker_Datepicker.__docgenInfo={description:"",methods:[],displayName:"Datepicker",props:{value:{type:{name:"instanceOf",value:"Date"},required:!1,description:""},onChange:{type:{name:"func"},required:!0,description:""}}};var ScheduledCall_Datepicker_Datepicker=withStyles_default()(datepicker_default.a)(Datepicker_Datepicker),List=__webpack_require__(1042),ListItem=__webpack_require__(1492),Divider=__webpack_require__(460),SearchBar=__webpack_require__(1043),MemberList=__webpack_require__(1044),CheckAll=__webpack_require__(1491),BeforeCallManager=__webpack_require__(2261),workspace_member=__webpack_require__(418);function ParticipantModal_slicedToArray(arr,i){return function ParticipantModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ParticipantModal_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ParticipantModal_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ParticipantModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ParticipantModal_arrayLikeToArray(o,minLen)}(arr,i)||function ParticipantModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ParticipantModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ParticipantModal_useStyles=Object(makeStyles.a)((function(theme){return{paper:{position:"absolute",width:320,maxHeight:420,backgroundColor:theme.palette.background.paper,boxShadow:theme.shadows[5],top:"50%",left:"50%",transform:"translate(-50%, -50%)"},listRoot:{paddingTop:0}}})),ParticipantModal_ParticipantModal=function ParticipantModal(_ref){var currentUser=_ref.currentUser,members=_ref.members,disabledParticipants=_ref.disabledParticipants,onChangeParticipants=_ref.onChangeParticipants,classes=ParticipantModal_useStyles(),_useState2=ParticipantModal_slicedToArray(Object(react.useState)(""),2),searchText=_useState2[0],setSearchText=_useState2[1],membersExceptOwner=members.filter((function(member){return Object(workspace_member.a)(member)!==currentUser.get("uuid")})),actions=Object(jsx_runtime.jsx)(CheckAll.a,{members:membersExceptOwner,unchecked:disabledParticipants,onCheckHandler:onChangeParticipants}),_useState4=ParticipantModal_slicedToArray(Object(react.useState)(null),2),anchorEl=_useState4[0],setAnchorEl=_useState4[1],open=Boolean(anchorEl),body=Object(jsx_runtime.jsxs)(react_default.a.Fragment,{children:[Object(jsx_runtime.jsxs)(List.a,{classes:{root:classes.listRoot},children:[Object(jsx_runtime.jsx)(ListItem.a,{children:Object(jsx_runtime.jsx)(SearchBar.a,{value:searchText,onChange:setSearchText})}),Object(jsx_runtime.jsx)(Divider.a,{component:"li"})]}),Object(jsx_runtime.jsx)(MemberList.a,{searchText:searchText,members:members,groupActionFunctor:Object(CheckAll.b)(currentUser,disabledParticipants,onChangeParticipants),memberFunctor:Object(BeforeCallManager.b)(currentUser,disabledParticipants,onChangeParticipants),actions:actions})]});return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(Button.a,{type:"button",color:"primary",variant:"contained",onClick:function handleOpen(event){return setAnchorEl(event.currentTarget)},children:Object(localization.a)("workspaces","scheduled_call_choose_participants")}),Object(jsx_runtime.jsx)(popover_Popover,{anchorEl:anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:open,onClose:function handleClose(){return setAnchorEl(null)},classes:{paper:classes.paper},children:body})]})};ParticipantModal_ParticipantModal.__docgenInfo={description:"",methods:[],displayName:"ParticipantModal"};var ScheduledCall_ParticipantModal=ParticipantModal_ParticipantModal,isValidDate=function isValidDate(d){return d instanceof Date&&!isNaN(d)};function hooks_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function hooks_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?hooks_ownKeys(Object(source),!0).forEach((function(key){hooks_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):hooks_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function hooks_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function hooks_slicedToArray(arr,i){return function hooks_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function hooks_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function hooks_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return hooks_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hooks_arrayLikeToArray(o,minLen)}(arr,i)||function hooks_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hooks_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var calendarActions=__webpack_require__(352),WorkspaceMember=__webpack_require__(242),PublicUser=__webpack_require__(92),Event=__webpack_require__(38);function ScheduledCall_slicedToArray(arr,i){return function ScheduledCall_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ScheduledCall_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ScheduledCall_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ScheduledCall_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ScheduledCall_arrayLikeToArray(o,minLen)}(arr,i)||function ScheduledCall_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ScheduledCall_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ScheduledCall_useStyles=Object(makeStyles.a)((function(theme){return{formControl:{minWidth:120},selectEmpty:{marginTop:theme.spacing(2)}}})),callDurationVariants=[5,10,15,20,25,30,35,40],ScheduledCall_ScheduledCall=function ScheduledCall(_ref2){var currentUser=_ref2.currentUser,_ref2$workspaceMember=_ref2.workspaceMembers,workspaceMembers=void 0===_ref2$workspaceMember?[]:_ref2$workspaceMember,workspace=_ref2.workspace,_ref2$disabledCallMan=_ref2.disabledCallManagerRecipients,disabledCallManagerRecipients=void 0===_ref2$disabledCallMan?new Set:_ref2$disabledCallMan,handleClose=_ref2.handleClose,submitScheduledCallDispatch=_ref2.submitScheduledCallDispatch,scheduledCallPending=_ref2.scheduledCallPending,classes=ScheduledCall_useStyles(),initialCallDate=new Date;initialCallDate.setHours(initialCallDate.getHours()+1);var initialState={date:initialCallDate,duration:30,title:"",note:""},firstRender=Object(react.useRef)(!0),getParticipants=function getParticipants(){return workspaceMembers.map(workspace_member.a).filter((function(uuid){return!disabledParticipants.has(uuid)}))},isScheduledCallContainsParticipants=function isScheduledCallContainsParticipants(){return getParticipants().size>1},isFormValid=function isFormValid(){var dateObj=new Date(inputs.date);return isValidDate(dateObj)&&dateObj.getTime()>(new Date).getTime()&&inputs.duration>0},_useForm=function useForm(initialValues,callback){var _useState2=hooks_slicedToArray(Object(react.useState)(initialValues),2),inputs=_useState2[0],setInputs=_useState2[1];return{handleSubmit:function handleSubmit(event){event&&event.preventDefault(),callback()},handleInputChange:function handleInputChange(event){event.persist(),setInputs((function(inps){return hooks_objectSpread(hooks_objectSpread({},inps),{},hooks_defineProperty({},event.target.name,event.target.value))}))},handleDateChange:function handleDateChange(date){isValidDate(date)&&setInputs((function(inps){return hooks_objectSpread(hooks_objectSpread({},inps),{},{date:date})}))},inputs:inputs}}(initialState,(function submitForm(){var participants=[];if(workspaceMembers.map((function(member){return member.get("user")})).filter((function(user){return!disabledParticipants.has(user.get("uuid"))})).forEach((function(user){participants.push({user:Object(immutableUtils.f)(user)})})),workspace){var event=new Event.d({date:inputs.date.getTime(),duration:inputs.duration,title:inputs.title,note:inputs.note,user:currentUser,type:Event.a.SCHEDULED_CALL_EVENT,communityUuid:workspace.get("communityUuid"),participants:participants,workspace:Object(immutableUtils.f)(workspace)});submitScheduledCallDispatch(event,getParticipants())}})),inputs=_useForm.inputs,handleInputChange=_useForm.handleInputChange,handleDateChange=_useForm.handleDateChange,handleSubmit=_useForm.handleSubmit,_useState2=ScheduledCall_slicedToArray(Object(react.useState)(disabledCallManagerRecipients),2),disabledParticipants=_useState2[0],setDisabledParticipants=_useState2[1],_useState4=ScheduledCall_slicedToArray(Object(react.useState)(isFormValid()&&!scheduledCallPending&&isScheduledCallContainsParticipants()),2),submitEnabled=_useState4[0],setSubmitEnabled=_useState4[1];return Object(react.useEffect)((function(){if(firstRender.current)firstRender.current=!1;else{var formValid=isFormValid(),scheduledCallHasParticipants=isScheduledCallContainsParticipants();setSubmitEnabled(formValid&&scheduledCallHasParticipants)}}),[inputs.date,inputs.duration,disabledParticipants]),Object(jsx_runtime.jsx)(react_default.a.Fragment,{children:Object(jsx_runtime.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:handleSubmit,children:[Object(jsx_runtime.jsx)(DialogContent.a,{dividers:!0,children:Object(jsx_runtime.jsxs)(Grid.a,{container:!0,spacing:3,children:[Object(jsx_runtime.jsxs)(Grid.a,{item:!0,xs:12,children:[Object(jsx_runtime.jsx)(Typography.a,{gutterBottom:!0,children:Object(localization.a)("workspaces","scheduled_call_datetime")}),Object(jsx_runtime.jsx)(ScheduledCall_Datepicker_Datepicker,{onChange:handleDateChange,value:new Date(inputs.date)})]}),Object(jsx_runtime.jsxs)(Grid.a,{item:!0,xs:12,children:[Object(jsx_runtime.jsx)(Typography.a,{gutterBottom:!0,children:Object(localization.a)("workspaces","scheduled_call_duration")}),Object(jsx_runtime.jsx)(formControl_FormControl,{variant:"outlined",size:"small",className:classes.formControl,fullWidth:!0,children:Object(jsx_runtime.jsx)(Select.a,{name:"duration",onChange:handleInputChange,value:inputs.duration,required:!0,children:callDurationVariants.map((function(v){return Object(jsx_runtime.jsxs)(MenuItem.a,{value:v,children:[v," ",Object(localization.a)("groups","time_l_minute",v)]})}))})})]}),Object(jsx_runtime.jsx)(Grid.a,{item:!0,xs:12,children:Object(jsx_runtime.jsx)(ScheduledCall_ParticipantModal,{currentUser:currentUser,members:workspaceMembers,disabledParticipants:disabledParticipants,onChangeParticipants:function onChangeParticipants(uuids,include){var localDisabledParticipants=new Set(disabledParticipants);uuids.forEach((function(uuid){!include&&localDisabledParticipants.has(uuid)?localDisabledParticipants.delete(uuid):include&&!localDisabledParticipants.has(uuid)&&localDisabledParticipants.add(uuid)})),setDisabledParticipants(localDisabledParticipants)}})}),Object(jsx_runtime.jsxs)(Grid.a,{item:!0,xs:12,children:[Object(jsx_runtime.jsx)(Typography.a,{gutterBottom:!0,children:Object(localization.a)("workspaces","scheduled_call_title")}),Object(jsx_runtime.jsx)(TextField.a,{variant:"outlined",size:"small",required:!0,fullWidth:!0,name:"title",onChange:handleInputChange,value:inputs.title,inputProps:{maxLength:100}})]}),Object(jsx_runtime.jsxs)(Grid.a,{item:!0,xs:12,children:[Object(jsx_runtime.jsx)(Typography.a,{gutterBottom:!0,children:Object(localization.a)("workspaces","scheduled_call_note")}),Object(jsx_runtime.jsx)(TextField.a,{multiline:!0,rows:4,variant:"outlined",size:"small",required:!0,fullWidth:!0,name:"note",onChange:handleInputChange,value:inputs.note,inputProps:{maxLength:1e3}})]})]})}),Object(jsx_runtime.jsxs)(DialogActions.a,{children:[Object(jsx_runtime.jsx)(Button.a,{onClick:handleClose,color:"primary",children:Object(localization.a)("dialogs","cancel")}),Object(jsx_runtime.jsx)(Button.a,{type:"submit",color:"primary",variant:"contained",disabled:!submitEnabled,"data-testid":"dialogs_create",children:Object(localization.a)("dialogs","create")})]})]})})};ScheduledCall_ScheduledCall.propTypes={currentUser:ImmutablePropTypes_default.a.recordOf(PublicUser.a).isRequired,workspaceMembers:ImmutablePropTypes_default.a.mapOf(WorkspaceMember.b).isRequired,workspace:prop_types_default.a.object,disabledCallManagerRecipients:prop_types_default.a.object,handleClose:prop_types_default.a.func.isRequired,submitScheduledCallDispatch:prop_types_default.a.func.isRequired,scheduledCallPending:prop_types_default.a.bool},ScheduledCall_ScheduledCall.__docgenInfo={description:"@param {ScheduledCallProps} \t\t\tprops\n@return {JSX.Element}",methods:[],displayName:"ScheduledCall",props:{workspaceMembers:{defaultValue:{value:"[]",computed:!1},type:{name:"custom",raw:"ImmutablePropTypes.mapOf(WorkspaceMember).isRequired"},required:!1,description:""},disabledCallManagerRecipients:{defaultValue:{value:"new Set()",computed:!1},type:{name:"object"},required:!1,description:""},currentUser:{type:{name:"custom",raw:"ImmutablePropTypes.recordOf(PublicUser).isRequired"},required:!1,description:""},workspace:{type:{name:"object"},required:!1,description:""},handleClose:{type:{name:"func"},required:!0,description:""},submitScheduledCallDispatch:{type:{name:"func"},required:!0,description:""},scheduledCallPending:{type:{name:"bool"},required:!1,description:""}}};var conference2_ScheduledCall_ScheduledCall=Object(lib.connectBeans)(Object(es.b)((function mapStateToProps(state){var activeWorkspaceUuid=state.getIn([ConnectSceneService.a,"activeWorkspaceUuid"]);return{workspaceMembers:state.getIn([UserWorkspacesService.a,"workspaces",activeWorkspaceUuid,"members"]),workspace:state.getIn([UserWorkspacesService.a,"workspaces",activeWorkspaceUuid]),disabledCallManagerRecipients:state.getIn([CallsService.a,"disabledCallManagerRecipients"]),scheduledCallPending:state.getIn([calendarActions.c,"scheduledCallPending"]),currentUser:state.getIn(["session","user"])}}),(function mapDispatchToProps(dispatch,_ref){var getBeanInstance=_ref.getBeanInstance;return{submitScheduledCallDispatch:function submitScheduledCallDispatch(event,participants){return dispatch(Object(calendarActions.m)(getBeanInstance,event,participants))}}}))(ScheduledCall_ScheduledCall)),DialogTitle=__webpack_require__(2285),Dialog=__webpack_require__(2284),Conference_Conference=function Conference(props){var conf=function getConference(props){var hasActiveCall=props.hasActiveCall,waitingForConferenceToStart=props.waitingForConferenceToStart,callWindowView=props.callWindowView;return hasActiveCall||waitingForConferenceToStart?callWindowView!==types.d.FLOAT&&callWindowView!==types.d.FULL_SCREEN&&props.waitingForConferenceToStart?Object(jsx_runtime.jsx)(Main_ConferenceCall,{showBlocks:[Popup_const.a.BEFORE]}):callWindowView===types.d.FLOAT||callWindowView===types.d.FULL_SCREEN?Object(jsx_runtime.jsx)(Main_ConferenceCall,{}):null:null}(props),callsService=props.getBeanInstance(CallsService.a),closeScheduleCall=function closeScheduleCall(){var dispatch=props.dispatch,workspace=props.workspace;dispatch(Object(calendarActions.n)(!1)),props.scheduledCallCloseOnly||callsService.waitForConference(!0,{workspaceUuid:workspace.get("uuid"),type:workspace.get("type"),activeConferenceUuid:workspace.get("activeConferenceUuid")})};return Object(jsx_runtime.jsxs)(react_default.a.Fragment,{children:[conf,Object(jsx_runtime.jsxs)(Dialog.a,{onClose:closeScheduleCall,open:props.scheduledCallActive,children:[Object(jsx_runtime.jsx)(DialogTitle.a,{onClose:closeScheduleCall,children:Object(localization.a)("workspaces","schedule_call_dialog")}),Object(jsx_runtime.jsx)(conference2_ScheduledCall_ScheduledCall,{handleClose:closeScheduleCall})]})]})};Conference_Conference.propTypes={hasActiveCall:prop_types_default.a.bool,waitingForConferenceToStart:prop_types_default.a.bool,dispatch:prop_types_default.a.func,getBeanInstance:prop_types_default.a.func,workspace:prop_types_default.a.object},Conference_Conference.__docgenInfo={description:"",methods:[],displayName:"Conference",props:{hasActiveCall:{type:{name:"bool"},required:!1,description:""},waitingForConferenceToStart:{type:{name:"bool"},required:!1,description:""},dispatch:{type:{name:"func"},required:!1,description:""},getBeanInstance:{type:{name:"func"},required:!1,description:""},workspace:{type:{name:"object"},required:!1,description:""}}};__webpack_exports__.default=Object(es.b)((function mapStateToProps(state){var activeWorkspaceUuid=state.getIn([ConnectSceneService.a,"activeWorkspaceUuid"]);return{callWindowView:state.getIn([CallsService.a,"callWindowView"]),hasActiveCall:state.getIn([CallsService.a,"status"])===types.f.JOINED||state.getIn([CallsService.a,"status"])===types.f.LISTENING,waitingForConferenceToStart:state.getIn([CallsService.a,"waiting"]),scheduledCallActive:state.getIn([calendarActions.c,"scheduledCallActive"]),scheduledCallCloseOnly:state.getIn([calendarActions.c,"scheduledCallCloseOnly"]),workspace:state.getIn([UserWorkspacesService.a,"workspaces",activeWorkspaceUuid])}}))(Object(lib.withInject)(Conference_Conference))}}]);